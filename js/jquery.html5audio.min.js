(function(e) {
    e.fn.html5audio = function(h) {
        function d() {
            var a = 0 == k.find("div[class='fontMeasure']").length ? e("<div/>").addClass("fontMeasure").appendTo(k) : k.find("div[class='fontMeasure']");
            ta = new apTextScroller;
            ta.init(a, ib, be, "left", h.scrollSeparator, h.scrollSpeed)
        }

        function T() {
            U && clearTimeout(U);
            ja.css("display", "none");
            Bb = !1
        }

        function ua(a) {
            if (m && !x && !ca) {
                if (!Cb) {
                    if ("touchstart" == a.type) {
                        if (a = a.originalEvent.touches, !(a && 0 < a.length)) return !1
                    } else a.preventDefault();
                    Cb = !0;
                    $a.on(jb, function(a) {
                        a: {
                            var c;
                            if ("touchmove" == a.type) {
                                if (a.originalEvent.touches && a.originalEvent.touches.length) c = a.originalEvent.touches;
                                else if (a.originalEvent.changedTouches && a.originalEvent.changedTouches.length) c = a.originalEvent.changedTouches;
                                else break a;
                                if (1 < c.length) break a;
                                c = c[0]
                            } else c = a.originalEvent;a.preventDefault();G(c)
                        }
                    }).on(kb, function(a) {
                        a: if (Cb) {
                            Cb = !1;
                            $a.off(jb).off(kb);
                            var c;
                            if ("touchend" == a.type) {
                                if (a.originalEvent.touches && a.originalEvent.touches.length) c = a.originalEvent.touches;
                                else if (a.originalEvent.changedTouches &&
                                    a.originalEvent.changedTouches.length) c = a.originalEvent.changedTouches;
                                else break a;
                                if (1 < c.length) break a;
                                c = c[0]
                            } else c = a.originalEvent;
                            a.preventDefault();
                            G(c)
                        }
                    })
                }
                return !1
            }
        }

        function G(a) {
            "horizontal" == Db ? C = Math.max(0, Math.min(1, (a.pageX - lb.offset().left) / ka)) : (C = Math.max(0, Math.min(1, (a.pageY - lb.offset().top) / ka)), C = 1 - C);
            D()
        }

        function y() {
            if (!m || x) return !1;
            ec ? (C = Ac, ec = !1) : (Ac = C, C = 0, ec = !0)
        }

        function D() {
            "horizontal" == Db ? fc.css("width", C * ka + "px") : fc.css("height", C * ka + "px");
            da && ("youtube" == V ? Z ? A && A.setVolume(C) :
                "undefined" !== typeof l(E) && l(E).pb_setVolume(C) : P ? n && (n.volume = C) : "undefined" !== typeof l(q) && l(q).pb_setVolume(C));
            0 < C ? k.find(".player_volume").find("img").attr("src", id) : k.find(".player_volume").find("img").attr("src", jd);
            isMobile && Eb && (U && clearTimeout(U), U = setTimeout(T, gc))
        }

        function p() {
            Eb && U && clearTimeout(U);
            La.css("display", "block");
            ja.on("mousemove", Q).on("mouseout", L);
            $a.on("mouseout", L)
        }

        function L() {
            Eb && (U && clearTimeout(U), U = setTimeout(T, gc));
            La.css("display", "none");
            ja.off("mousemove", Q).off("mouseout",
                L);
            $a.off("mouseout", L)
        }

        function Q(a) {
            if ("horizontal" == Db) {
                var b = a.pageX - lb.offset().left;
                if (!w(b)) return !1;
                0 > b ? b = 0 : b > ka && (b = ka);
                a = parseInt(a.pageX - ja.offset().left - La.width() / 2, 10);
                La.css("left", a + "px");
                b = Math.max(0, Math.min(1, b / ka));
                b = parseInt(100 * b, 10)
            } else {
                b = a.pageY - lb.offset().top;
                if (!w(b)) return !1;
                0 > b ? b = 0 : b > ka && (b = ka);
                a = parseInt(b - La.height() / 2, 10);
                La.css("top", a + ce + "px");
                b = Math.max(0, Math.min(1, b / ka));
                b = parseInt(100 * (1 - b), 10)
            }
            La.find("p").html(b + " %")
        }

        function ga(a) {
            if (m && !x && da && !Cb && !hc) {
                if (!ca) {
                    if ("touchstart" ==
                        a.type) {
                        if (a = a.originalEvent.touches, !(a && 0 < a.length)) return !1
                    } else a.preventDefault();
                    ca = !0;
                    $a.on(jb, function(a) {
                        a: {
                            var c;
                            if ("touchmove" == a.type) {
                                if (a.originalEvent.touches && a.originalEvent.touches.length) c = a.originalEvent.touches;
                                else if (a.originalEvent.changedTouches && a.originalEvent.changedTouches.length) c = a.originalEvent.changedTouches;
                                else break a;
                                if (1 < c.length) break a;
                                c = c[0]
                            } else c = a;a.preventDefault();va(c, a)
                        }
                    }).on(kb, function(a) {
                        wa(a)
                    })
                }
                return !1
            }
        }

        function wa(a) {
            if (ca) {
                ca = !1;
                $a.off(jb).off(kb);
                var b;
                if ("touchend" == a.type) {
                    if (a.originalEvent.touches && a.originalEvent.touches.length) b = a.originalEvent.touches;
                    else if (a.originalEvent.changedTouches && a.originalEvent.changedTouches.length) b = a.originalEvent.changedTouches;
                    else return !1;
                    if (1 < b.length) return !1;
                    b = b[0]
                } else b = a;
                a.preventDefault();
                va(b, a)
            }
            if (ha) var c = setTimeout(function() {
                c && clearTimeout(c);
                Bc = !1
            }, 500);
            return !1
        }

        function va(a, b) {
            if (!ha) {
                ab = a.pageX - Cc.offset().left;
                0 > ab ? ab = 0 : ab > W && (ab = W);
                xa.width(ab);
                var c = Math.max(0, Math.min(1, ab / W))
            } else if (Ia) {
                if (ic(b)) {
                    if (jc ||
                        Dc > Ec - kd) return !1;
                    ca || (mb(!0), K.clearRect(0, 0, la, pa), X(ma), ya());
                    return !1
                }
                if (!jc) return !1;
                Bc = !0;
                var c = a.pageX - Va.offset().left - la / 2,
                    g = a.pageY - Va.offset().top - pa / 2,
                    c = Math.atan2(g, c);
                c > -1 * Math.PI && c < -.5 * Math.PI && (c = 2 * Math.PI + c);
                ma = c = Math.max(0, Math.min((c + Math.PI / 2) / 2 * Math.PI * 10)) / 100;
                K.clearRect(0, 0, la, pa);
                X(ma);
                ya()
            }
            if (!w(c)) return !1;
            Fb = ma;
            qa(c)
        }

        function qa(a) {
            "youtube" == V ? Z ? (a = (a * A.getDuration()).toFixed(1), w(a) && A.seek(a)) : "undefined" !== typeof l(E) && l(E).pb_seek(a) : P ? n && n.seekable && 0 < n.seekable.length &&
                (!de || isMobile ? n.currentTime = a * n.duration : a * n.duration >= n.buffered.end(0) - 5 ? n.currentTime = n.buffered.end(0) - 5 : n.currentTime = a * n.duration) : "undefined" !== typeof l(q) && l(q).pb_seek(a)
        }

        function X(a) {
            K.beginPath();
            K.arc(la / 2, pa / 2, Fc - Gb / 2, -kc, ld * a - kc, !1);
            K.strokeStyle = Gc;
            K.lineCap = "butt";
            K.lineWidth = Gb;
            K.stroke()
        }

        function Wa(a) {
            Xa.beginPath();
            Xa.arc(la / 2, pa / 2, Fc - Gb / 2, -kc, ld * a - kc, !1);
            Xa.strokeStyle = ee;
            Xa.lineCap = "butt";
            Xa.lineWidth = Gb;
            Xa.stroke()
        }

        function ya() {
            if (F) a = 62, b = 57, K.fillStyle = Gc, K.fillRect(a,
                b, 14, 45), K.fillRect(a + 23, b, 14, 45);
            else {
                var a = 65,
                    b = 57,
                    c = 65 - a,
                    g = 102 - b,
                    f = Math.atan2(g, c) - Math.PI / 3,
                    g = Math.sqrt(c * c + g * g),
                    c = Math.cos(f) * g + a,
                    f = Math.sin(f) * g + b;
                K.beginPath();
                K.fillStyle = Gc;
                K.moveTo(a, b);
                K.lineTo(65, 102);
                K.lineTo(c, f);
                K.fill()
            }
        }

        function ic(a) {
            var b;
            if ("touchstart" == a.type) {
                if (a.originalEvent.touches && a.originalEvent.touches.length) a = a.originalEvent.touches;
                else if (a.originalEvent.changedTouches && a.originalEvent.changedTouches.length) a = a.originalEvent.changedTouches;
                else return !1;
                if (1 < a.length) return !1;
                b = a[0]
            } else b = a.originalEvent;
            a = b.pageX - Va.offset().left;
            b = b.pageY - Va.offset().top;
            var c = la / 2,
                g = pa / 2;
            Dc = Math.sqrt((a - c) * (a - c) + (b - g) * (b - g));
            return Math.sqrt((a - c) * (a - c) + (b - g) * (b - g)) < Ec
        }

        function ia(a) {
            if (0 != k.find(".componentPlaylist").length)
                if (aa) "vertical" == Hb ? Ma.outerHeight(!0) >= nb.height() ? (aa.reinitialise(), a && (aa.scrollToY(0), e(".jspPane").css("top", "0px"))) : (aa.destroy(), aa = null) : (aa.reinitialise(), a && (aa.scrollToX(0), e(".jspPane").css("left", "0px")));
                else if (a = k.find(".componentPlaylist"),
                aa = a.jScrollPane().data().jsp, a.on("jsp-initialised", function(a, c) {}).jScrollPane({
                    mouseWheelSpeed: 20
                }), "horizontal" == Hb && !isMobile) a.on("mousewheel", fe)
        }

        function fe(a, b, c, g) {
            if (!m || x) return !1;
            aa && aa.scrollByX(100 * (0 < b ? -1 : 1));
            return !1
        }

        function mb(a) {
            if (F) {
                if ("youtube" == V) {
                    if (!Oa) return !1;
                    Z ? A.togglePlayback() : ("undefined" !== typeof l(E) && l(E).pb_togglePlayback(), da = !0)
                } else P ? n && n.pause() : "undefined" !== typeof l(q) && l(q).pb_pause();
                F = !1;
                Ja("off")
            } else {
                if ("youtube" == V) {
                    if (!Oa) return !1;
                    Z ? isMobile ? !Ib &&
                        ea ? (m = !1, lc("on")) : A.togglePlayback() : A.togglePlayback() : ("undefined" !== typeof l(E) && l(E).pb_togglePlayback(), da = !0)
                } else P ? n && n.play() : "undefined" !== typeof l(q) && l(q).pb_play();
                F = !0;
                bb("off")
            }
            if (!a) return !1
        }

        function md(a) {
            if (!m || x) return !1;
            a.preventDefault();
            a = e(a.currentTarget);
            var b = a.attr("data-id");
            if (a.closest(".playlistItem").hasClass(Jb)) return !1;
            ea = !0;
            Na();
            t.processPlaylistRequest(b)
        }

        function ge(a) {
            if (!m || x) return !1;
            a.preventDefault();
            a = e(a.currentTarget).attr("class").split(" ");
            if (-1 !=
                e.inArray("controls_prev", a)) ea = !0, Na(), t.advanceHandler(-1, !0);
            else if (-1 != e.inArray("controls_toggle", a)) da && mb();
            else if (-1 != e.inArray("controls_next", a)) ea = !0, Na(), t.advanceHandler(1, !0);
            else if (-1 != e.inArray("player_volume", a)) isMobile ? Eb ? (U && clearTimeout(U), Bb ? (ja.css("display", "none"), Bb = !1) : (ja.css("display", "block"), Bb = !0, U = setTimeout(T, gc))) : (y(), D()) : (y(), D());
            else if (-1 != e.inArray("player_download", a)) {
                if (!mc && !Pa)
                    if (a = V) {
                        var b = t.getCounter(),
                            c = B[b].download,
                            b = Hc(b, !1);
                        a = nd(a, b, c);
                        od(a.name,
                            a.path)
                    } else u && alert("Invalid data-type for file download function! Quitting."), Pa = !1
            } else -1 != e.inArray("player_loop", a) ? (za ? (k.find(".player_loop").find("img").attr("src", nc), za = !1) : (k.find(".player_loop").find("img").attr("src", Kb), za = !0), t.setLooping(za)) : -1 != e.inArray("player_shuffle", a) && (Aa ? (k.find(".player_shuffle").find("img").attr("src", oc), Aa = !1) : (k.find(".player_shuffle").find("img").attr("src", Lb), Aa = !0), t.setRandom(Aa))
        }

        function he(a) {
            m && (a.preventDefault(), a = e(a.currentTarget).attr("class").split(" "),
                -1 != e.inArray("controls_prev", a) ? k.find(".controls_prev").find("img").attr("src", ie) : -1 != e.inArray("controls_toggle", a) ? F ? bb("on") : Ja("on") : -1 != e.inArray("controls_next", a) ? k.find(".controls_next").find("img").attr("src", je) : -1 != e.inArray("player_volume", a) ? 0 < C ? k.find(".player_volume").find("img").attr("src", ke) : k.find(".player_volume").find("img").attr("src", le) : -1 != e.inArray("player_download", a) ? k.find(".player_download").find("img").attr("src", me) : -1 != e.inArray("player_loop", a) ? za ? k.find(".player_loop").find("img").attr("src",
                    nc) : k.find(".player_loop").find("img").attr("src", Kb) : -1 != e.inArray("player_shuffle", a) && (Aa ? k.find(".player_shuffle").find("img").attr("src", oc) : k.find(".player_shuffle").find("img").attr("src", Lb)))
        }

        function ne(a) {
            m && (a.preventDefault(), a = e(a.currentTarget).attr("class").split(" "), -1 != e.inArray("controls_prev", a) ? k.find(".controls_prev").find("img").attr("src", oe) : -1 != e.inArray("controls_toggle", a) ? F ? bb("off") : Ja("off") : -1 != e.inArray("controls_next", a) ? k.find(".controls_next").find("img").attr("src",
                pe) : -1 != e.inArray("player_volume", a) ? 0 < C ? k.find(".player_volume").find("img").attr("src", id) : k.find(".player_volume").find("img").attr("src", jd) : -1 != e.inArray("player_download", a) ? k.find(".player_download").find("img").attr("src", qe) : -1 != e.inArray("player_loop", a) ? za ? k.find(".player_loop").find("img").attr("src", Kb) : k.find(".player_loop").find("img").attr("src", nc) : -1 != e.inArray("player_shuffle", a) && (Aa ? k.find(".player_shuffle").find("img").attr("src", Lb) : k.find(".player_shuffle").find("img").attr("src",
                oc)))
        }

        function Na() {
            if (!ra && -1 != t.getCounter()) {
                var a = e(Qa[t.getCounter()]);
                if (a && a.hasClass("playlistSelected")) {
                    var b = a.attr("data-id");
                    a.removeClass("playlistSelected").addClass("playlistNonSelected");
                    "undefined" !== typeof playlistItemEnabled && playlistItemEnabled(N, M, a, b)
                }
            }
        }

        function pd() {
            if (!ra) {
                var a = e(Qa[t.getCounter()]);
                if (a && a.hasClass("playlistNonSelected")) {
                    var b = a.attr("data-id");
                    a.removeClass("playlistNonSelected").addClass("playlistSelected");
                    "undefined" !== typeof playlistItemDisabled &&
                        playlistItemDisabled(N, M, a, b)
                }
            }
        }

        function Ic() {
            var a = h.activeItem;
            w(a) && -1 != a ? (0 > a ? a = 0 : a > H - 1 && (a = H - 1), t.setCounter(a, !1)) : ea = !0
        }

        function qd() {
            v && -1 != t.getCounter() && (Mb(), rd(), Na())
        }

        function Nb() {
            Mb();
            rd();
            var a = 0,
                b;
            for (a; a < H; a++) b = e(Qa[a]).off("click", md), sd && !isMobile && b.off("mouseenter").off("mouseleave");
            v && (v.children().each(function() {
                var a = e(this);
                a.data("hap_wrap_player") && a.data("hap_wrap_player").destroyPlaylist()
            }), v.empty(), v = null);
            Ma.empty();
            ra = Ob = !1;
            Pb = O = r = null;
            ob = pb = Qb = !1;
            qb = null;
            t.reSetCounter();
            B = [];
            Qa = [];
            R = [];
            aa && aa.reinitialise()
        }

        function Mb() {
            pc && (Z ? A && A.stop() : "undefined" !== typeof l(E) && l(E).pb_dispose(), pc = !1);
            P ? (Ba && clearInterval(Ba), n && (n.pause(), n.src = ""), Rb && Rb.off("ended pause play canplay canplaythrough loadedmetadata error")) : "undefined" !== typeof l(q) && l(q).pb_dispose();
            Jc();
            Pb ? cb.css("display", "block") : cb.css("display", "none");
            Fb = null;
            Kc = da = F = hc = !1;
            Lc || (Sb = void 0)
        }

        function td(a) {
            if ("undefined" === typeof a) return u && alert("setPlaylist method requires data parameter. loadPlaylist failed."),
                !1;
            if ("undefined" === typeof a.hidden) return u && alert("setPlaylist method requires data.hidden parameter. loadPlaylist failed."), !1;
            var b = re(a.hidden);
            if ("undefined" === typeof a.id) return u && alert("setPlaylist method requires data.id parameter. loadPlaylist failed."), !1;
            a = a.id;
            x = !0;
            ud || (ud = !0);
            vd();
            Ma.css("opacity", 0);
            v && Nb();
            Ob = !1;
            ra = b;
            wd && isIE ? (b = e(Ya.find(a).css("display", "block").clone().wrap("<p>").parent().html()), e(Ya.find(a).css("display", "none"))) : (b = Ya.find(a).css("display", "block").clone(),
                Ya.find(a).css("display", "none"));
            b.css("fontSize", 0);
            if (0 == b.length) return u && alert('Failed to select playlist! Make sure that element: "' + a + '" exist in playlist list! Quitting.'), Mc(), !1;
            if (ra) rb.empty(), b.appendTo(rb), Ca = 0, ob = pb = db = !0, v = Nc;
            else {
                if (!aa && 0 == Ma.length) return u && alert("playlist_inner html element seems to be missing! You could be trying to use loadPlaylist method without having necessary html elements inside componentWrapper. Quitting."), !1;
                b.appendTo(Ma);
                v = b
            }
            B = [];
            Qa = [];
            R = [];
            J = [];
            b.find("li[class*='playlistItem']").each(function() {
                J.push(e(this))
            });
            Y()
        }

        function Y() {
            J.length ? se() : te()
        }

        function se() {
            Tb = fa = S = O = na = null;
            Oc = !1;
            var a = J[0],
                b = a.attr("data-type").toLowerCase(),
                c = a.attr("data-path"),
                g = a.hasClass(xd);
            z = [];
            a.hasClass(yd) && (Oc = !0);
            void 0 == a.attr("data-plink") || I(a.attr("data-plink")) || (na = a.attr("data-plink"));
            void 0 != a.attr("data-dlink") && ("youtube_single" == b || "youtube_single_list" == b || "youtube_playlist" == b ? I(a.attr("data-dlink")) || (O = a.attr("data-dlink")) : O = I(a.attr("data-dlink")) ?
                !0 : a.attr("data-dlink"));
            void 0 != a.attr("data-download") && ("youtube_single" == b || "youtube_single_list" == b || "youtube_playlist" == b ? I(a.attr("data-download")) || (S = a.attr("data-download")) : S = I(a.attr("data-download")) ? !0 : a.attr("data-download"));
            void 0 == a.attr("data-thumb") || I(a.attr("data-thumb")) || (fa = a.attr("data-thumb"));
            I(e.trim(a.html())) || (Tb = a.html());
            if (g) r = a, J.shift(), Y();
            else if ("local" == b) r = a, J.shift(), Y();
            else if ("soundcloud" == b) r = a.data("toremove", "true"), qc = 0, rc(c);
            else if ("podcast" == b) r =
                a.data("toremove", "true"), g = Pc + "?url=" + encodeURIComponent(c), e.ajax({
                    url: g,
                    dataType: "json",
                    cache: !1
                }).done(function(a) {
                    if (ieBelow9) {
                        a = ue(a.contents);
                        var b, c = 0;
                        e(a).find("item").each(function() {
                            if (c == Qc) return !1;
                            b = e(this);
                            k = {
                                type: "podcast"
                            };
                            k.mp3 = b.find("enclosure").attr("url");
                            k.ogg = "";
                            k.title = b.find("title").text();
                            0 < b.find("media\\:thumbnail").length ? b.find("media\\:thumbnail").attr("url") ? k.thumb = b.find("media\\:thumbnail").attr("url") : fa && (k.thumb = fa) : fa && (k.thumb = fa);
                            na && (k.url = na);
                            O && (k.dlink =
                                O);
                            S && (k.download = S);
                            z.push(k);
                            c++
                        })
                    } else {
                        zd.html(a.contents);
                        a = zd.get(0).getElementsByTagName("item");
                        var g = 0,
                            c = a.length,
                            f, d, k;
                        c > Qc && (c = Qc);
                        for (g; g < c; g++) f = a[g], void 0 != f.getElementsByTagName("enclosure")[0] && (k = {
                                type: "podcast"
                            }, k.mp3 = f.getElementsByTagName("enclosure")[0].getAttribute("url"), k.ogg = "", void 0 != f.getElementsByTagName("itunes:duration")[0] && (d = ve(f.getElementsByTagName("itunes:duration")[0].childNodes[0].nodeValue), k.length = parseInt(1E3 * d, 10)), void 0 != f.getElementsByTagName("media:thumbnail")[0] ?
                            void 0 != f.getElementsByTagName("media:thumbnail")[0].getAttribute("url") ? k.thumb = f.getElementsByTagName("media:thumbnail")[0].getAttribute("url") : fa && (k.thumb = fa) : fa && (k.thumb = fa), k.title = f.getElementsByTagName("title")[0].childNodes[0].nodeValue, na && (k.url = na), O && (k.dlink = O), S && (k.download = S), z.push(k))
                    }
                    Ra()
                }).fail(function(a, b, g) {
                    u && alert("Parse feed error: " + a.responseText);
                    u && alert("Playlist process failed, podcast: " + c);
                    r && "true" == r.data("toremove") && r.remove();
                    J.shift();
                    Y()
                });
            else if ("folder" ==
                b) {
                r = a.data("toremove", "true");
                var g = hap_source_path + "folder_parser.php",
                    f = !0;
                void 0 != a.attr("data-subdirs") && "false" == a.attr("data-subdirs") && (f = !1);
                f = {
                    dir: c,
                    subdirs: f
                };
                e.ajax({
                    type: "GET",
                    url: g,
                    data: f,
                    dataType: "json"
                }).done(function(a) {
                    we(a, "title");
                    var b = 0,
                        c = a.length,
                        g, f;
                    Ad && (Za = z.length ? z.length - 1 : 0);
                    for (b; b < c; b++)
                        if (g = a[b], f = g.path, f = f.replace(/\\'/g, "'"), f = f.replace(/\\"/g, '"'), f = f.replace(/\\0/g, "\x00"), path = f = f.replace(/\\\\/g, "\\"), console.log(g), f = {
                                type: "folder"
                            }, /.mp3/.test(path)) {
                            f.mp3 =
                                path;
                            f.ogg = path.substr(0, path.lastIndexOf(".")) + ".ogg";
                            var e = path.substr(0, path.lastIndexOf("."));
                            title = /\//i.test(e) ? e.substr(e.lastIndexOf("/") + 1) : e;
                            title = title.split("_").join(" ");
                            f.title = title;
                            f.thumb = path.substr(0, path.lastIndexOf(".")) + ".jpg";
                            f.size = parseInt(g.size, 10);
                            f.lastmod = parseInt(g.lastmod, 10);
                            na && (f.url = na);
                            O && (f.dlink = O);
                            S && (f.download = S);
                            fa && (f.thumb = fa);
                            z.push(f)
                        } z.length && Ad ? Bd() : Ra()
                }).fail(function(a, b, f) {
                    u && alert("Read folder error! Make sure you run this online or on local server!");
                    u && alert("Playlist process failed, folder: " + c);
                    r && "true" == r.data("toremove") && r.remove();
                    J.shift();
                    Y()
                })
            } else if ("xml" == b) {
                r = a;
                var g = hap_source_path + c,
                    d, k = [];
                e.ajax({
                    type: "GET",
                    url: g,
                    dataType: "html",
                    cache: !1
                }).done(function(b) {
                    J.shift();
                    e(b).find("li[class='playlistItem']").each(function() {
                        d = Rc(e(this));
                        r ? r.after(e(d)) : 0 < v.children().length ? e(d).prependTo(v) : e(d).appendTo(v);
                        r = e(d);
                        k.push(e(d))
                    });
                    b = 0;
                    var c = k.length;
                    k.reverse();
                    for (b; b < c; b++) J.unshift(k[b]);
                    k = null;
                    a.remove();
                    Y()
                }).fail(function(a,
                    b, f) {
                    u && alert("Playlist process failed, xml: " + c);
                    r && r.remove();
                    J.shift();
                    Y()
                })
            } else if ("database_data" == b || "database_html" == b)
                if (void 0 == a.attr("data-table") || I(a.attr("data-table"))) u && (alert("Database table missing!"), alert("Playlist process failed, database query: " + c)), J.shift(), Y();
                else {
                    var h = f = null,
                        l = null;
                    void 0 == a.attr("data-limit") || I(a.attr("data-limit")) || (f = parseInt(a.attr("data-limit"), 10));
                    void 0 == a.attr("data-range") || I(a.attr("data-range")) || (g = a.attr("data-range").split(","), 2 == g.length &&
                        (h = g[0], l = g[1]));
                    r = a;
                    g = hap_source_path + "includes/database.php";
                    k = [];
                    f = {
                        db_name: c,
                        db_table: a.attr("data-table"),
                        db_type: b,
                        limit: f,
                        range_from: h,
                        range_to: l
                    };
                    e.ajax({
                        type: "POST",
                        url: g,
                        data: f
                    }).done(function(f) {
                        if (-1 < f.indexOf("Database information missing!") || -1 < f.indexOf("Db connection failed") || -1 < f.indexOf("Db selection failed") || -1 < f.indexOf("Db query failed")) u && (alert(f), alert("Playlist process failed, database query: " + c)), r && r.remove(), J.shift();
                        else {
                            J.shift();
                            f = e.parseJSON(f);
                            var g = 0,
                                h = f.length,
                                l;
                            for (g; g < h; g++) {
                                l = f[g];
                                if ("database_data" == b)
                                    if (l.type && l.mp3 || l.path) d = Cd(l);
                                    else continue;
                                else if (l.path) d = Rc(l.path);
                                else continue;
                                r ? r.after(e(d)) : 0 < v.children().length ? e(d).prependTo(v) : e(d).appendTo(v);
                                r = e(d);
                                k.push(e(d))
                            }
                            g = 0;
                            h = k.length;
                            k.reverse();
                            for (g; g < h; g++) J.unshift(k[g]);
                            k = null;
                            a.remove()
                        }
                        Y()
                    }).fail(function(a, b, f) {
                        u && alert("Playlist process failed, database query: " + c);
                        r && r.remove();
                        J.shift();
                        Y()
                    })
                }
            else "youtube_single" == b || "youtube_single_list" == b || "youtube_playlist" == b ? (r = a.data("toremove",
                "true"), Dd.setData({
                type: b,
                path: c
            })) : "ofm_single" == b ? (r = a.data("toremove", "true"), Sa = [], Sa.push({
                id: c,
                type: b
            }), Ub()) : "ofm_playlist" == b || "ofm_project" == b ? (r = a.data("toremove", "true"), Sc = b, sc = c, Sa = [], Vb = 1, Ed()) : (u && alert("Invalid playlist data-type attribute!"), J.shift(), Y())
        }

        function Ra() {
            if (z.length) {
                var a, b, c = 0,
                    g = z.length,
                    f, d;
                for (c; c < g; c++) f = z[c], a = e('<li class="playlistItem" data-type="' + f.type + '"data-mp3="' + f.mp3 + '" data-ogg="' + f.ogg + '" data-thumb="' + f.thumb + '"></li>'), d = f.mp3, /\.(mp3)$/i.test(f.mp3) ||
                    (d += ".mp3"), Oc && a.addClass(yd), f.url && a.attr("data-plink", f.url), f.dlink && (1 != f.dlink && "true" != f.dlink ? a.attr("data-dlink", f.dlink) : a.attr("data-dlink", d)), f.download && (1 != f.download && "true" != f.download ? a.attr("data-download", f.download) : a.attr("data-download", d)), f.title && a.attr("data-title", f.title), f.thumb && ("//" == f.thumb.substr(0, 2) && (f.thumb = "http:" + f.thumb), a.attr("data-thumb", f.thumb)), f.length && a.attr("data-length", f.length), "title" == Ta ? b = e('<a class="playlistNonSelected" href="#">' + f.title +
                        "</a>").appendTo(a) : "thumb" == Ta ? b = e('<a class="playlistNonSelected" href="#"><img src="' + f.thumb + '" alt="thumb"/></a>').appendTo(a) : "all" == Ta && (b = e('<a class="playlistNonSelected" href="#"></a>').appendTo(a), e('<span class="hap_thumb"><img src="' + f.thumb + '" alt="thumb"/></span>').appendTo(b), e('<span class="hap_title"><p>' + f.title + "</p></span>").appendTo(b)), Tb && b.after(Tb), r ? (r.after(a), "true" == r.data("toremove") && r.remove()) : a.appendTo(v), r = a
            }
            J.shift();
            Y()
        }

        function te() {
            if (Qb || pb) {
                var a = 0;
                r = null;
                var b;
                rb.find("li[class*='playlistItem']").each(function() {
                    b = e(this);
                    r ? r.after(b) : db ? b.appendTo(v) : v.children().eq(Ca).before(b);
                    r = b;
                    a++
                });
                rb.empty()
            }
            tc();
            Ma.css("opacity", 1);
            m || Fd();
            Tb = r = null;
            x = !1;
            Mc();
            if (0 < H) {
                if (Qb || pb) {
                    var c = t.getCounter();
                    t.setPlaylistItems(H, !1);
                    Ca <= c && (db || t.reSetCounter(c + a));
                    ob && (ob = !1, Ic())
                } else t.setPlaylistItems(H), Ic();
                eb && Ua()
            }
            pb = Qb = !1;
            0 == H && "undefined" !== typeof playlistEmpty && playlistEmpty(N, M);
            "undefined" !== typeof audioPlayerPlaylistLoaded && audioPlayerPlaylistLoaded(N,
                M);
            Ob = !0
        }

        function tc() {
            B = [];
            R = [];
            Qa = [];
            if (0 == v.length) return u && alert("lastPlaylist html element seems to be missing! You could be trying to use addTrack method without having necessary html elements inside componentWrapper. Quitting."), !1;
            var a = 0,
                b, c, g = v.find("li"),
                f = g.length,
                d, k, l, h, n, p, T, q, r, w;
            Wb = 0;
            for (a; a < f; a++) {
                c = e(g[a]).addClass(xd);
                R.push(c);
                Tc && c.addClass(Jb);
                Wb = "horizontal" == Hb ? Wb + c.outerWidth(!0) : Wb + c.outerHeight(!0);
                b = c.find("a[class=playlistNonSelected]");
                0 == b.length && (b = c.find("a[class=playlistSelected]"));
                b.off().on("click", md).attr("data-id", a);
                Qa.push(b);
                if (sd && !isMobile) b.on("mouseenter", function(a) {
                    if (!m || x) return !1;
                    a || (a = window.event);
                    a.cancelBubble ? a.cancelBubble = !0 : a.stopPropagation && a.stopPropagation();
                    a = e(a.currentTarget).attr("data-id");
                    var b = e(Qa[a]),
                        c = !1;
                    t.getCounter() == a && (c = !0);
                    "undefined" !== typeof playlistItemRollover && playlistItemRollover(N, M, b, a, c);
                    return !1
                }).on("mouseleave", function(a) {
                    if (!m || x) return !1;
                    a || (a = window.event);
                    a.cancelBubble ? a.cancelBubble = !0 : a.stopPropagation && a.stopPropagation();
                    a = e(a.currentTarget).attr("data-id");
                    var b = e(Qa[a]),
                        c = !1;
                    t.getCounter() == a && (c = !0);
                    "undefined" !== typeof playlistItemRollout && playlistItemRollout(N, M, b, a, c);
                    return !1
                });
                d = "";
                void 0 != c.attr("data-title") ? d = c.attr("data-title") : "title" == Ta ? d = b.html() : "thumb" != Ta && "all" == Ta && (d = b.find("span[class=hap_title]").find("p").html());
                Uc && (k = Vc(a) + Wc + d, b.html(k));
                c = e(R[a]).attr({
                    "data-id": a,
                    "data-title": d
                });
                l = k = p = n = "";
                h = void 0;
                w = r = q = T = null;
                void 0 != c.attr("data-mp3") && (n = c.attr("data-mp3"));
                void 0 != c.attr("data-ogg") &&
                    (p = c.attr("data-ogg"));
                void 0 != c.attr("data-type") && (k = c.attr("data-type"));
                void 0 != c.attr("data-origtype") && (l = c.attr("data-origtype"));
                void 0 == c.attr("data-length") || I(c.attr("data-length")) || (h = c.attr("data-length"));
                "youtube" == k ? (void 0 == c.attr("data-download") || I(c.attr("data-download")) || (T = c.attr("data-download")), void 0 == c.attr("data-dlink") || I(c.attr("data-dlink")) || (q = c.attr("data-dlink"))) : (void 0 != c.attr("data-download") && (T = I(c.attr("data-download")) || "true" == c.attr("data-download") ?
                    n : c.attr("data-download")), void 0 != c.attr("data-dlink") && (q = I(c.attr("data-dlink")) || "true" == c.attr("data-dlink") ? n : c.attr("data-dlink")));
                void 0 == c.attr("data-plink") || I(c.attr("data-plink")) || (r = c.attr("data-plink"));
                void 0 == c.attr("data-thumb") || I(c.attr("data-thumb")) || (w = c.attr("data-thumb"));
                ra || (r && 0 == c.find("a[class=plink]").length && (r = e('<a class="plink" href="' + r + '" target="_blank"><img src="' + Gd + '" alt="purchase"/></a>'), b.after(r)), q && (mc ? (q = e('<a href="' + q + '" download><img src="' + Xc +
                    '" alt="download"/></a>'), b.after(q)) : 0 == c.find("a[class=dlink]").length && (q = e('<a class="dlink" href="#" data-dlink="' + q + '"><img src="' + Xc + '" alt="download"/></a>'), b.after(q), I(c.attr("data-dlink")))), Hd && 0 == c.find("a[class=premove]").length && (c = e('<a class="premove" href="#"><img src="' + xe + '" alt="remove"/></a>'), b.after(c)));
                B.push({
                    id: a,
                    type: k,
                    origtype: l,
                    title: d,
                    mp3: n,
                    ogg: p,
                    length: h,
                    download: T,
                    thumb: w
                })
            }
            g = null;
            H = B.length;
            ra || (ye(), ze && nb.length && !v.hasClass("ui-sortable") && (v.on("sortstart",
                function(a, b) {
                    b.helper.css("margin-top", Id.scrollTop())
                }), v.on("sortbeforestop", function(a, b) {
                b.helper.css("margin-top", 0)
            }), v.sortable({
                cursor: "move",
                update: function(a, b) {
                    tc();
                    0 < H && t.setPlaylistItems(H);
                    var c = Ma.find("a[class=playlistSelected]").attr("data-id");
                    c && (t.reSetCounter(c), eb && Ua());
                    1 == H && Ic()
                },
                receive: function(a, b) {
                    "undefined" !== typeof dropReceive && dropReceive(N, M)
                }
            })), Jd && ("horizontal" == Hb && Ma.width(Wb), ia(!0)));
            return !0
        }

        function Fd() {
            m = !0;
            x = !1;
            Mc();
            setTimeout(function() {
                Kd();
                "horizontal" ==
                Db ? (ka = lb.width(), fc.css("width", C * ka + "px")) : (ka = lb.height(), fc.css("height", C * ka + "px"));
                D()
            }, 100);
            "undefined" !== typeof audioPlayerSetupDone && audioPlayerSetupDone(N, M)
        }

        function ye() {
            var a = uc ? sb : "click";
            if (mc) k.find("a[class=dlink]").each(function(a) {
                a = e(this);
                a.attr("href", a.attr("data-dlink")).attr("download", "")
            });
            else k.find("a[class=dlink]").off().on(a, function(a) {
                a.preventDefault();
                if (Pa) return !1;
                var c = e(this),
                    g = c.closest(".playlistItem"),
                    f = g.attr("data-id");
                if (g.hasClass(Jb)) return !1;
                if (void 0 ==
                    g.attr("data-type") || I(g.attr("data-type"))) return u && alert("Invalid data-type for file download function! Quitting."), Pa = !1;
                a = g.attr("data-type");
                void 0 == g.attr("data-origtype") || I(g.attr("data-origtype")) || (a = g.attr("data-origtype"));
                void 0 == c.attr("data-dlink") || I(c.attr("data-dlink")) || (c = c.attr("data-dlink"), f = Hc(f, !1), a = nd(a, f, c), od(a.name, a.path))
            });
            k.find("a[class=plink]").off().on("click", function(a) {
                if (e(this).closest(".playlistItem").hasClass(Jb)) return !1
            });
            if (Hd) k.find("a[class=premove]").off().on("click",
                function(a) {
                    a.preventDefault();
                    a = e(this).closest(".playlistItem");
                    var c = parseInt(a.attr("data-id"), 10);
                    if (a.hasClass(Jb)) return !1;
                    N.removeTrack(c)
                })
        }

        function nd(a, b, c) {
            "local" == a || "folder" == a ? (c.indexOf("\\") && (c = c.replace(/\\/g, "/")), c.match(/^http([s]?):\/\/.*/) || (a = window.location.href, a = a.substr(0, a.lastIndexOf("/") + 1), /^\.\.\//i.test(c) && (c = c.substr(3), "/" == a.charAt(a.length - 1) && (a = a.substr(0, a.lastIndexOf("/"))), a = a.substr(0, a.lastIndexOf("/") + 1)), c = a + c), isMobile || (b = 0 < c.lastIndexOf("/") ? c.substr(c.lastIndexOf("/") +
                1) : c)) : "soundcloud" == a && (c = c.replace(/\/stream\\?/, "/download").replace(/\.mp3/, ""));
            b = b.replace(/[^A-Z0-9\-\_\.]+/ig, "_");
            /\.(mp3)$/i.test(b) || (b += ".mp3");
            return {
                name: b,
                path: c
            }
        }

        function od(a, b) {
            if (isMobile)
                if (Pa = !0, Ae) Ld || (Yc = Md()) && (Ld = !0), Yc ? Nd(Yc, a, b) : Pa = !1;
                else {
                    var c = Md();
                    c ? Nd(c, a, b) : Pa = !1
                }
            else Be.attr("src", hap_source_path + "dl.php?path=" + b + "&name=" + a)
        }

        function Nd(a, b, c) {
            e.ajax({
                type: "POST",
                url: hap_source_path + "mail.php",
                data: "mail=" + a + "&name=" + b + "&path=" + c
            }).done(function(a) {
                Pa = !1
            }).fail(function(a,
                b, c) {
                u && alert("Send email error: " + a.responseText);
                Od();
                Pa = !1
            });
            vc.css({
                marginTop: -vc.height() / 2 + "px",
                display: "block"
            }).stop().animate({
                opacity: 1
            }, {
                duration: 500
            });
            Xb && clearTimeout(Xb);
            Xb = setTimeout(Od, Ce)
        }

        function Od() {
            Xb && clearTimeout(Xb);
            vc.stop().animate({
                opacity: 0
            }, {
                duration: 500,
                complete: function() {
                    vc.css("display", "none")
                }
            })
        }

        function Md() {
            for (var a = prompt("Please enter your email address where download link will be sent:"), b = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
                (!b.test(a) || I(a)) && null != a;) a =
                prompt("Please enter a valid email address:");
            return a
        }

        function De() {
            e(".hap_text_link").each(function() {
                var a = e(this),
                    b = a.attr("href");
                "undefined" !== typeof b && !1 !== b && -1 < b.toLowerCase().indexOf(".mp3") && a.prepend('<img class="play_link" src="' + wc + '"/>')
            });
            e(".hap_text_link, .hap_image_link").click(function(a) {
                if (!m || x) return !1;
                a = e(this);
                var b = a.attr("href");
                if ("undefined" === typeof b || !1 === b) return !1;
                if (Sb && Sb == b) return mb();
                Na();
                t.reSetCounter();
                Sb = b;
                Pd = a;
                Lc = !0;
                Da && Da.attr("src", wc);
                a.hasClass("hap_text_link") &&
                    (Da = a.find("img").attr("src", Qd));
                oa = Sb;
                tb = oa.substr(0, oa.lastIndexOf(".")) + ".ogg";
                ea = !0;
                P || "undefined" !== typeof l(q) && l(q).pb_setAutoplay(!0);
                Mb();
                Zc();
                return Lc = !1
            })
        }

        function Ub() {
            Sa.length ? Ee(Sa.shift()) : (0 == z.length && r && "true" == r.data("toremove") && r.remove(), z.length > Yb && (z = z.slice(0, Yb)), Ra())
        }

        function Ee(a) {
            var b = a.id,
                c = a.type;
            a = Pc + "?url=" + encodeURIComponent("http://api.official.fm/tracks/" + b + "?fields=streaming,cover&api_version=2");
            e.ajax({
                url: a,
                dataType: "html",
                cache: !1
            }).done(function(a) {
                var b =
                    JSON.parse(a).contents;
                a = {};
                var d, e;
                b.track && b.track.streaming && b.track.streaming.http && (b = b.track, a.type = c, a.length = b.duration ? b.duration : null, a.mp3 = b.streaming.http, a.ogg = b.streaming.http, d = b.artist ? b.artist : "Official Fm artist", e = b.title ? b.title : "Official Fm track", a.title = d + " - " + e, na && (a.url = na), O && (a.dlink = O), S && (a.download = S), b.cover.urls.small ? a.thumb = b.cover.urls.small : fa && (a.thumb = fa), z.push(a));
                Ub()
            }).fail(function(a, c, d) {
                u && alert("Playlist process failed, ofm: " + b);
                Ub()
            })
        }

        function Rd() {
            1 <
                $c ? (Vb += 1, Vb <= $c && Sa.length < Yb ? Ed() : Sa.length ? Ub() : (J.shift(), Y())) : Sa.length ? Ub() : (0 == z.length && r && "true" == r.data("toremove") && r.remove(), J.shift(), Y())
        }

        function Ed() {
            var a = Pc + "?url=" + encodeURIComponent("ofm_playlist" == Sc ? "http://api.official.fm/playlists/" + sc + "/tracks?api_version=2&page=" + Vb + "" : "http://api.official.fm/projects/" + sc + "/tracks?fields=cover&api_version=2&page=" + Vb + "");
            console.log(a);
            e.ajax({
                url: a,
                dataType: "html",
                cache: !1
            }).done(function(a) {
                a = JSON.parse(a).contents;
                $c = a.total_pages;
                if (a.tracks && a.tracks.length) {
                    var c = 0,
                        g = a.tracks.length,
                        f;
                    g > Yb && (g = Yb);
                    for (c; c < g; c++) f = a.tracks[c].track, f.url && (f = f.url.substr(f.url.lastIndexOf("/") + 1), f = f.substr(0, f.indexOf("?")), Sa.push({
                        id: f,
                        type: Sc
                    }))
                }
                Rd()
            }).fail(function(a, c, g) {
                u && alert("Playlist process failed, ofm: " + sc);
                Rd()
            })
        }

        function Fe() {
            Sd ? isMobile ? Ib ? A.initVideo(oa) : (m = !1, ad = !0, lc("on")) : A.initVideo(oa) : (Zb = 0 == k.find("div[class='youtubeIframeMain']").length ? e("<div/>").css({
                    display: "block",
                    left: "-10000px"
                }).addClass("youtubeIframeMain").appendTo(k) :
                k.find("div[class='youtubeIframeMain']"), A = e.youtubePlayer({
                    autoPlay: Td,
                    defaultVolume: C,
                    mediaPath: oa,
                    youtubeHolder: Zb,
                    youtubeChromeless: !1,
                    isMobile: isMobile,
                    initialAutoplay: Ge,
                    quality: null,
                    protocol: He
                }, h), e(A).on("ap_YoutubePlayer.YT_READY", function() {
                    bd || Zb.css("left", "-10000px");
                    Oa = !0
                }), e(A).on("ap_YoutubePlayer.START_PLAY", function() {
                    Ba && clearInterval(Ba);
                    Ba = setInterval(Ie, 250);
                    ad && (A.stop(), A.initVideo(oa), ad = !1);
                    !Ib && isMobile && (lc("off"), m = Ib = !0)
                }), e(A).on("ap_YoutubePlayer.END_PLAY", function() {
                    xc()
                }),
                e(A).on("ap_YoutubePlayer.STATE_PLAYING", function() {
                    yc()
                }), e(A).on("ap_YoutubePlayer.STATE_PAUSED", function() {
                    isMobile ? "iPhone" == ub || "iPod" == ub ? F && (F = !1, Ja("off")) : zc() : zc()
                }), Sd = !0);
            da = pc = !0
        }

        function lc(a) {
            "on" == a ? (bd = !0, Zb.css({
                top: "0px",
                left: "0px"
            })) : (Zb.css("left", "-10000px"), bd = null)
        }

        function Je() {
            var a = E.substr(1);
            embedFlashMain(a);
            a = q.substr(1);
            embedFlashAudio(a);
            "undefined" !== typeof l(E) ? Ea = setInterval(Ke, 100) : (u && alert("Problems with flash initialization (startFlashInit)! Flash for youtube not initialized! Sound_id: " +
                M), Ud())
        }

        function Ke() {
            void 0 != l(E).setData && (Ea && clearInterval(Ea), l(E).setData(h), k.find(".flashMain").css("left", "-10000px"), Ud())
        }

        function Ud() {
            "undefined" !== typeof l(q) ? Ea = setInterval(Le, 100) : (u && alert("Problems with flash initialization (checkFlashSound)! Flash audio backup not initialized! Sound_id: " + M), Vd())
        }

        function Me() {
            var a = q.substr(1);
            embedFlashAudio(a);
            var b = setTimeout(function() {
                b && clearTimeout(b);
                "undefined" !== typeof l(q) ? Ea = setInterval(Ne, 100) : (u && alert("Problems with flash initialization (checkFlashSound_b)! Flash audio backup not initialized! Sound_id: " +
                    M), vb())
            }, 500)
        }

        function Le() {
            void 0 != l(q).setData && (Ea && clearInterval(Ea), l(q).setData(h), k.find(".flashAudio").css("left", "-10000px"), Vd())
        }

        function Ne() {
            void 0 != l(q).setData && (Ea && clearInterval(Ea), l(q).setData(h), k.find(".flashAudio").css("left", "-10000px"), vb())
        }

        function Vd() {
            if (ha) {
                var a = ba.substr(1);
                embedFlashCircle(a);
                "undefined" !== typeof l(ba) ? Ea = setInterval(Oe, 100) : (u && alert("Problems with flash initialization (checkFlashCircle)! Flash circle backup (canvas support is false) not initialized! Sound_id: " +
                    M), vb())
            } else e(".circleMain").remove(), vb()
        }

        function Oe() {
            void 0 != l(ba).setData && (Ea && clearInterval(Ea), l(ba).setData(wb), vb())
        }

        function l(a) {
            "#" == a.charAt(0) && (a = a.substr(1));
            return -1 != navigator.appName.indexOf("Microsoft") ? window[a] : document[a]
        }

        function rc(a) {
            if (I(cd)) return alert("soundcloudApiKey has not been set! Skipping Soundcloud url."), J.shift(), Y(), !1;
            /\/favorites$/.test(a) && (a = a.replace(/\/favorites$/, "/likes"));
            var b = Pe(a, cd);
            e.ajax({
                url: b,
                dataType: "jsonp",
                cache: !1
            }).done(function(b) {
                var g,
                    f;
                if (b.tracks) {
                    console.log("DATA.TRACKS");
                    g = b.tracks.length;
                    g > sa && (g = sa);
                    for (f = 0; f < g; f++) b.tracks[f].streamable && b.tracks[f].stream_url ? z.push(dd(b.tracks[f])) : (g += 1, g > b.tracks.length && (g = b.tracks.length));
                    z.length > sa && (z = z.slice(0, sa));
                    Ra()
                } else if (b.duration) console.log("DATA.DURATION"), b.permalink_url = a, b.streamable && b.stream_url && z.push(dd(b)), z.length > sa && (z = z.slice(0, sa)), Ra();
                else if (b.username) /likes/.test(a) ? (console.log("DATA.USERNAME.LIKES"), fb = b.uri + "/likes") : /favorites/.test(a) ? (console.log("DATA.USERNAME.FAVOURITES"),
                    fb = b.uri + "/favorites") : fb = b.uri + "/tracks", rc(fb);
                else if (e.isArray(b)) {
                    console.log("DATA.ISARRAY");
                    g = b.length;
                    g > sa && (g = sa);
                    for (f = 0; f < g; f++) b[f].streamable && b[f].stream_url ? z.push(dd(b[f])) : (g += 1, g > b.length && (g = b.length));
                    g == Wd ? (qc += Wd, qc < sa ? rc(fb) : (z.length > sa && (z = z.slice(0, sa)), Ra())) : (z.length > sa && (z = z.slice(0, sa)), Ra())
                } else b.kind && "group" == b.kind ? (console.log("GROUPS"), fb = b.uri + "/tracks", rc(fb)) : (J.shift(), Y())
            }).fail(function(b, g, f) {
                u && alert("Playlist process failed, soundcloud: " + a);
                J.shift();
                Y()
            })
        }

        function dd(a) {
            var b = {
                type: "soundcloud"
            };
            a.duration && (b.length = a.duration);
            b.mp3 = a.stream_url + (/\?/.test(a.stream_url) ? "&" : "?") + "consumer_key=" + cd;
            b.ogg = "";
            b.title = a.title;
            na && (b.url = na);
            a.downloadable && a.download_url ? (O && (b.dlink = O), S && (b.download = S)) : (O && 1 != O && "true" != O && (b.dlink = O), S && 1 != S && "true" != S && (b.download = S));
            a.artwork_url ? b.thumb = a.artwork_url : fa && (b.thumb = fa);
            return b
        }

        function Pe(a, b) {
            return (/api\./.test(a) ? a + "?" : "http://api.soundcloud.com/resolve?url=" + a + "&") + "format=json&offset=" +
                qc + "&consumer_key=" + b + "&callback=?"
        }

        function Bd() {
            var a = z[Za].mp3 + "?rand=" + 99999999 * Math.random();
            ID3.loadTags(a, function() {
                var b = ID3.getAllTags(a);
                b.title && (z[Za].title = b.title);
                b.artist && (z[Za].artist = b.artist);
                b.album && (z[Za].album = b.album);
                if (b = b.picture) {
                    var c = "",
                        g = 0,
                        f = b.data.length;
                    for (g; g < f; g++) c += String.fromCharCode(b.data[g]);
                    z[Za].thumb = "data:" + b.format + ";base64," + window.btoa(c)
                }
                Za++;
                Za < z.length ? Bd() : Ra()
            }, {
                tags: ["title", "artist", "album", "picture"],
                onError: function(a) {}
            })
        }

        function Ie() {
            if (Z) {
                var a =
                    A.getCurrentTime(),
                    b = A.getDuration();
                Fa = A.getVideoBytesLoaded() / A.getVideoBytesTotal();
                w(a) && w(b) ? (hc = !1, Ga.html($b(a) + gb), Ha.html(ac(b)), ha) ? Ia && (w(Fa) && Wa(Fa), ma = a / b, !ca && F && (Bc || X(a / b))) : (w(Fa) && Ka.width(Fa * W), ca || xa.width(a / b * W)) : hc = !0
            }
        }

        function Qe() {
            var a = n.currentTime,
                b = n.duration;
            void 0 != n.buffered && 0 != n.buffered.length && w(b) && (Fa = n.buffered.end(0) / b);
            w(a) && w(b) && (Ga && Ga.html($b(a) + gb), Ha && Ha.html(ac(b)));
            if (ha) Ia && (w(Fa) && Wa(Fa), w(a) && w(b) && (ma = a / b, !ca && F && X(a / b)));
            else {
                if (w(Fa)) {
                    var c = Fa *
                        W;
                    c > W && (c = W);
                    Ka && Ka.width(c)
                }
                w(a) && w(b) && !ca && xa && xa.width(a / b * W)
            }
        }

        function xc() {
            "undefined" !== typeof audioPlayerSoundEnd && audioPlayerSoundEnd(N, M, t.getCounter());
            Na();
            t.advanceHandler(1, !0)
        }

        function yc() {
            Kc || ("undefined" !== typeof audioPlayerSoundStart && audioPlayerSoundStart(N, M, t.getCounter()), Kc = !0);
            "undefined" !== typeof audioPlayerSoundPlay && audioPlayerSoundPlay(N, M, t.getCounter());
            ha && Ia && ya()
        }

        function zc() {
            "undefined" !== typeof audioPlayerSoundPause && audioPlayerSoundPause(N, M, t.getCounter())
        }

        function Zc() {
            "youtube" ==
            V ? Z ? (Fe(), isMobile && !Ib && ea && (m = !1, lc("on"))) : ("undefined" !== typeof l(E) && (l(E).pb_play(oa, 0, 100, 100, "youtube", ea), da = !0), pc = Oa = !0) : P ? (Xd || (Rb = e(document.createElement("audio")).attr("preload", Re), n = Rb[0], Xd = !0), hb ? n.src = oa : bc && (n.src = tb), ea && (n.load(), n.play()), Rb.on("ended", function(a) {
                xc()
            }).on("pause", function(a) {
                zc()
            }).on("play", function(a) {
                yc()
            }).on("canplay", function(a) {}).on("canplaythrough", function(a) {}).on("loadedmetadata", function(a) {
                n.volume = C;
                Fb && (n.seekable && 0 < n.seekable.length && (n.currentTime =
                    Fb * n.duration), Fb = null);
                Ba && clearInterval(Ba);
                Ba = setInterval(Qe, 250)
            }).on("error", function(a) {
                switch (n.error.code) {
                    case n.error.MEDIA_ERR_ABORTED:
                        console.log("You aborted the audio playback.");
                        break;
                    case n.error.MEDIA_ERR_NETWORK:
                        console.log("A network error caused the audio download to fail part-way.");
                        break;
                    case n.error.MEDIA_ERR_DECODE:
                        console.log("The audio playback was aborted due to a corruption problem or because the audio used features your browser did not support.");
                        break;
                    case n.error.MEDIA_ERR_SRC_NOT_SUPPORTED:
                        console.log("The audio could not be loaded, either because the server or network failed or because the format is not supported.");
                        break;
                    default:
                        console.log("An unknown error occurred.")
                }
            })) : "undefined" !== typeof l(q) && l(q).pb_initAudio(oa);
            ea ? (F = !0, bb("off")) : (F = !1, Ja("off"));
            "youtube" != V && (da = !0);
            !isMobile && ea && A && A.setAutoPlay(!0);
            ea = !0
        }

        function vb() {
            var a = [k.find(".controls_next"), k.find(".controls_prev"), k.find(".controls_toggle"), k.find(".player_volume"), k.find(".player_download"), k.find(".player_loop"), k.find(".player_shuffle")],
                b, c = a.length,
                g = 0;
            for (g; g < c; g++)
                if (b = e(a[g]).css("cursor", "pointer").on("click", ge), Se && !isMobile) b.on("mouseover",
                    he).on("mouseout", ne);
            De();
            qb ? td(qb) : m || Fd()
        }

        function Kd() {
            if (!ha && (W = Cc.width(), w(Fa) && Ka && Ka.width(Fa * W), !ca && xa)) {
                var a, b;
                if ("youtube" != V) {
                    if (P) n && (a = n.currentTime, b = n.duration);
                    else if ("undefined" !== typeof l(q)) try {
                        a = l(q).pb_getFlashPosition(), b = l(q).pb_getFlashDuration()
                    } catch (c) {}
                    try {
                        a && w(a) && b && w(b) && xa.width(a / b * W)
                    } catch (c) {}
                }
            }
            Jd && !ra && ia();
            xb && ta && ta.checkSize()
        }

        function Mc() {
            Yd.css("display", "none")
        }

        function vd() {
            Yd.css("display", "block")
        }

        function rd() {
            Ba && clearInterval(Ba);
            xb && ta && ta.deactivate();
            ib.html(cc);
            Ga.html(ed + gb);
            Ha.html(fd);
            ha ? Ia && (ma = 0, K.clearRect(0, 0, la, pa), Xa.clearRect(0, 0, la, pa)) : (xa.width(0), Ka.width(0));
            Ja("off");
            cb.css("display", "none")
        }

        function Jc() {
            Ba && clearInterval(Ba);
            eb || (xb && ta && ta.deactivate(), ib.html(cc));
            Ga.html(ed + gb);
            Ha.html(fd);
            ha ? Ia && (ma = 0, K.clearRect(0, 0, la, pa), Xa.clearRect(0, 0, la, pa)) : (xa.width(0), Ka.width(0));
            Ja("off");
            cb.css("display", "none")
        }

        function Ja(a) {
            "on" == a ? k.find(".controls_toggle").find("img").attr("src", Te) : k.find(".controls_toggle").find("img").attr("src",
                Ue);
            Da && Da.hasClass("play_link") && Da.attr("src", wc);
            ha && (Ia ? (K.clearRect(0, 0, la, pa), X(ma), ya()) : "undefined" !== typeof l(ba) && l(ba).pb_toggle_icon("play"))
        }

        function bb(a) {
            "on" == a ? k.find(".controls_toggle").find("img").attr("src", Ve) : k.find(".controls_toggle").find("img").attr("src", We);
            Da && Da.hasClass("play_link") && Pd.hasClass("hap_text_link") && Da.attr("src", Qd);
            ha && (Ia ? (K.clearRect(0, 0, la, pa), X(ma), ya()) : "undefined" !== typeof l(ba) && l(ba).pb_toggle_icon("pause"))
        }

        function w(a) {
            return !isNaN(parseFloat(a)) &&
                isFinite(a)
        }

        function $b(a) {
            a = Math.round(a);
            minutes = Math.floor(a / 60);
            minutes = 10 <= minutes ? minutes : "0" + minutes;
            a = Math.floor(a % 60);
            return minutes + ":" + (10 <= a ? a : "0" + a)
        }

        function ac(a) {
            a = Math.round(a);
            minutes = Math.floor(a / 60);
            minutes = 10 <= minutes ? minutes : "0" + minutes;
            a = Math.floor(a % 60);
            return minutes + ":" + (10 <= a ? a : "0" + a)
        }

        function Ua(a) {
            if ("string" === typeof a) {
                if (Uc && t && -1 != t.getCounter()) {
                    var b = t.getCounter();
                    a = Vc(B[b].id) + Wc + a
                }
            } else {
                if ("number" === typeof a) {
                    if (!t || 0 > a || a > H - 1) return !1
                } else if (!t) return !1;
                b = t.getCounter();
                a = Hc(b)
            }
            xb && ta ? (ta.input(a), ta.activate()) : ib && ib.html(a)
        }

        function Hc(a, b) {
            if ("undefined" === typeof b || null === b) b = !0;
            return B[a] && B[a].title && !I(B[a].title) ? b ? Uc ? Vc(B[a].id) + Wc + B[a].title : B[a].title : B[a].title : cc
        }

        function Vc(a) {
            return 9 > a ? "0" + (a + 1) : a + 1
        }

        function Xe(a) {
            var b = [],
                c = [],
                g = 0;
            for (g; g < a; g++) b[g] = g;
            var g = 0,
                f;
            for (g; g < a; g++) f = Math.round(Math.random() * (b.length - 1)), c[g] = b[f], b.splice(f, 1);
            return c
        }

        function Ye(a) {
            var b = [],
                c = 0;
            for (c; c < a; c++) b[c] = c;
            return b
        }

        function we(a, b, c) {
            "title" == b ? a.sort(function(a,
                b) {
                return a.title == b.title ? 0 : a.title < b.title ? -1 : 1
            }) : "type" == b && a.sort(function(a, b) {
                return a.type == b.type ? 0 : a.type < b.type ? -1 : 1
            });
            c && a.reverse()
        }

        function I(a) {
            return a ? 0 == a.replace(/^\s+|\s+$/g, "").length : !0
        }

        function ve(a) {
            a = a.split(":");
            for (var b = 0, c = 1; 0 < a.length;) b += c * parseInt(a.pop()), c *= 60;
            return b
        }

        function ue(a) {
            if (window.ActiveXObject && window.GetObject) {
                var b = new ActiveXObject("Microsoft.XMLDOM");
                b.loadXML(a);
                return b
            }
            if (window.DOMParser) return (new DOMParser).parseFromString(a, "text/xml");
            throw Error("No XML parser available");
        }

        function Ze(a, b) {
            return b - a
        }

        function re(a) {
            if ("string" === typeof a) switch (a.toLowerCase()) {
                case "true":
                case "yes":
                case "1":
                    return !0;
                case "false":
                case "no":
                case "0":
                case null:
                    return !1;
                default:
                    return !!a
            } else if ("boolean" === typeof a) return !!a
        }

        function $e() {
            var a = document.createElement("canvas");
            return !(!a.getContext || !a.getContext("2d"))
        }

        function Cd(a) {
            var b, c = "",
                g, f = "",
                d = "",
                k = "",
                l, h, n, m;
            b = a.type.toLowerCase();
            a.origtype && (c = a.origtype.toLowerCase());
            a.mp3 ? g = a.mp3 : a.path && (g = a.path);
            a.ogg && (f = a.ogg);
            a.title && (d = a.title);
            a.thumb && (k = a.thumb);
            a.download && ("youtube_single" == b || "youtube_single_list" == b || "youtube_playlist" == b ? 1 == a.download || "true" == a.download || I(a.download) || (l = a.download) : l = 1 == a.download ? g : a.download);
            a.url && (n = a.url);
            a.dlink && ("youtube_single" == b || "youtube_single_list" == b || "youtube_playlist" == b ? 1 == a.dlink || "true" == a.dlink || I(a.dlink) || (h = a.dlink) : h = 1 == a.dlink ? g : a.dlink);
            "local" == b ? "title" == Ta ? m = "<li class= 'playlistItem' data-type='local' data-origtype='" + c + "' data-mp3='" + g + "' data-ogg='" +
                f + "' data-thumb='" + k + "' data-title='" + d + "'><a class='playlistNonSelected' href='#'>" + d + "</a></li>" : "thumb" == Ta ? m = "<li class= 'playlistItem' data-type='local' data-origtype='" + c + "' data-mp3='" + g + "' data-ogg='" + f + "' data-thumb='" + k + "' data-title='" + d + "'><a class='playlistNonSelected' href='#'><img src='" + k + "' alt='thumb'/></a></li>" : "all" == Ta && (m = "<li class= 'playlistItem' data-type='local' data-origtype='" + c + "' data-mp3='" + g + "' data-ogg='" + f + "' data-thumb='" + k + "' data-title='" + d + "'><a class='playlistNonSelected' href='#'><span class='hap_thumb'><img src='" +
                    k + "' alt='thumb'/></span><span class='hap_title'><p>'" + d + "'</p></span></a></li>") : (m = "<li class= 'playlistItem' data-type='" + b + "' data-path='" + g + "' data-thumb='" + k + "'></li>", "database_data" == b && (g = a.table ? a.table : null, c = a.limit ? a.limit : null, a = a.range ? a.range : null, g && (g = ' data-table="' + g + '" ', f = m.match(/\>/), m = m.slice(0, f.index) + g + m.slice(f.index)), c && (g = ' data-limit="' + c + '" ', f = m.match(/\>/), m = m.slice(0, f.index) + g + m.slice(f.index)), a && (g = ' data-range="' + a + '" ', f = m.match(/\>/), m = m.slice(0, f.index) +
                    g + m.slice(f.index))));
            l && (g = ' data-download="' + l + '" ', f = m.match(/\>/), m = m.slice(0, f.index) + g + m.slice(f.index));
            "local" == b ? (h && (g = "<a class='dlink' href='#' data-dlink='" + h + "'><img src='" + Xc + "' alt='download'/></a>", f = m.match(/\<\/a\>\<\/li\>/), m = m.slice(0, f.index) + g + m.slice(f.index)), n && (g = "<a class='plink' href='" + n + "' target='_blank'><img src='" + Gd + "' alt='purchase'/></a>", f = m.match(/\<\/a\>\<\/li\>/), m = m.slice(0, f.index) + g + m.slice(f.index))) : (h && (g = ' data-dlink="' + h + '" ', f = m.match(/\>/), m = m.slice(0,
                f.index) + g + m.slice(f.index)), n && (g = ' data-plink="' + n + '" ', f = m.match(/\>/), m = m.slice(0, f.index) + g + m.slice(f.index)));
            b = document.createElement("ul");
            b.innerHTML = m;
            return e(b.firstChild)
        }

        function Rc(a) {
            a = e(a);
            var b;
            a = e("<div>").append(a.clone()).html();
            b = document.createElement("ul");
            b.innerHTML = a;
            return e(b.firstChild)
        }

        function yb(a) {
            H = B.length;
            if (0 < H) {
                tc();
                var b = t.getCounter();
                a == b ? (qd(), t.setPlaylistItems(H)) : (t.setPlaylistItems(H, !1), a < b && t.reSetCounter(t.getCounter() - 1));
                eb && Ua()
            } else Nb(), qb = null,
                "undefined" !== typeof playlistEmpty && playlistEmpty(N, M)
        }
        var m = !1,
            N = this;
        e("body");
        var Id = e(window),
            $a = e(document),
            He = e.inArray(window.location.protocol, ["http:", "https:"]) ? "http:" : window.location.protocol,
            gd, mc = "download" in document.createElement("a"),
            zb = navigator.userAgent,
            ub;
        if (-1 < zb.indexOf("iPhone") || -1 < zb.indexOf("iPod") || -1 < zb.indexOf("iPad")) - 1 < zb.indexOf("iPhone") ? ub = "iPhone" : -1 < zb.indexOf("iPod") ? ub = "iPod" : -1 < zb.indexOf("iPad") && (ub = "iPad");
        var de = -1 < navigator.userAgent.toLowerCase().indexOf("safari/"),
            dc = document.createElement("audio"),
            hb, bc, Z = !1;
        dc.canPlayType ? (Z = !0, hb = !!dc.canPlayType && "" != dc.canPlayType("audio/mpeg"), bc = !!dc.canPlayType && "" != dc.canPlayType('audio/ogg; codecs="vorbis"')) : (hb = !0, bc = !1);
        var oe = hap_source_path + h.buttonsUrl.prev,
            ie = hap_source_path + h.buttonsUrl.prevOn,
            pe = hap_source_path + h.buttonsUrl.next,
            je = hap_source_path + h.buttonsUrl.nextOn,
            Ue = hap_source_path + h.buttonsUrl.play,
            Te = hap_source_path + h.buttonsUrl.playOn,
            We = hap_source_path + h.buttonsUrl.pause,
            Ve = hap_source_path + h.buttonsUrl.pauseOn,
            nc = hap_source_path + h.buttonsUrl.loop,
            Kb = hap_source_path + h.buttonsUrl.loopOn,
            id = hap_source_path + h.buttonsUrl.volume,
            ke = hap_source_path + h.buttonsUrl.volumeOn,
            jd = hap_source_path + h.buttonsUrl.mute,
            le = hap_source_path + h.buttonsUrl.muteOn,
            oc = hap_source_path + h.buttonsUrl.shuffle,
            Lb = hap_source_path + h.buttonsUrl.shuffleOn,
            qe = hap_source_path + h.buttonsUrl.download,
            me = hap_source_path + h.buttonsUrl.downloadOn,
            Gd = hap_source_path + h.buttonsUrl.trackUrlIcon,
            Xc = hap_source_path + h.buttonsUrl.trackDownloadIcon,
            xe = hap_source_path +
            h.buttonsUrl.trackRemoveIcon,
            Qd = hap_source_path + h.buttonsUrl.link_pause,
            wc = hap_source_path + h.buttonsUrl.link_play,
            k = e(this).css("display", "block"),
            ha = k.hasClass("hap_circle"),
            Ia = !1;
        Z && $e() && (Ia = !0);
        var wd = "html5audio-popup" == k.attr("id"),
            nb = k.find(".playlistHolder"),
            Ma = k.find(".playlist_inner").css("opacity", 0);
        k.find(".playerHolder");
        k.find(".player_mediaTime");
        var Ga = k.find(".player_mediaTime_current"),
            Ha = k.find(".player_mediaTime_total"),
            be = k.find(".player_mediaName_Mask"),
            ib = k.find(".player_mediaName");
        k.find(".player_controls");
        var af = k.find(".player_volume"),
            Yd = k.find(".preloader"),
            cb = k.find(".player_download");
        k.find(".componentPlaylist");
        var Ya = e(h.playlistList);
        wd && window.opener && (Ya = window.opener.jQuery(h.playlistList));
        var Dd = new APHAPYTLoader(h);
        e(Dd).on("APHAPYTLoader.END_LOAD", function(a, b) {
            var c, g = b.length,
                f;
            for (c = 0; c < g; c++) f = b[c], f.description = f.description ? f.description.replace(/["']/g, "") : null, na && (f.url = na), O && (f.dlink = O), S && (f.download = S), z.push(f);
            z.length > Zd && (z = z.slice(0, Zd));
            Ra()
        });
        var M = h.sound_id,
            ea = h.autoPlay,
            Ge = h.autoPlay,
            Td = h.autoPlay,
            Re = h.autoLoad;
        isMobile && (ea = !1, Td = h.autoPlay = !1);
        var bf = h.useOnlyMp3Format,
            cd = h.soundcloudApiKey,
            sa = h.soundcloud_result_limit,
            Qc = h.podcast_result_limit,
            Zd = h.yt_playlist_result_limit,
            Yb = h.ofm_result_limit,
            xb = h.useSongNameScroll,
            eb = h.autoSetSongTitle,
            za = h.loopingOn,
            Aa = h.randomPlay,
            gb = h.mediaTimeSeparator,
            cf = h.seekTooltipSeparator,
            cc = h.defaultArtistData,
            Uc = h.useNumbersInPlaylist,
            Wc = h.titleSeparator,
            qb = h.activePlaylist,
            u = h.useAlertMessaging,
            Jd = h.activatePlaylistScroll,
            Hb = h.playlistScrollOrientation.toLowerCase(),
            ze = h.sortablePlaylistItems,
            Ae = h.autoReuseMailForDownload,
            Hd = h.useRemoveBtnInTracks,
            df = h.useVolumeTooltip,
            Ta = h.playlistItemContent.toLowerCase(),
            ef = h.useKeyboardNavigation,
            Se = h.useBtnRollovers,
            sd = h.usePlaylistRollovers,
            Ad = h.getTrackInfoFromID3;
        Ga.html("0:00");
        Ha.html("0:00");
        var ed = Ga.html(),
            fd = Ha.html();
        ib.html(cc);
        Ga.html(ed + gb);
        Ha.html(fd);
        var P = !0;
        if (!Z || !hb && bf) P = !1;
        var Za, db, Ca, Qb, pb, ob, ra = !1,
            xd = "hap_processed",
            yd = "hap_draggable",
            Oc, na, Ld, Yc, Pa, O, S, Pb, fa, Tb, Pd, Da, Sb, Lc, Tc = !1;
        void 0 != nb.attr("data-playlistLocked") && (Tc = !0);
        var Jb = "playlist_locked",
            Ob = !1,
            Wb, r, v = null,
            x = !0,
            hc = !1,
            Kc = !1,
            fb, qc, Wd = 50,
            V, da = !1,
            oa = "",
            tb = "",
            F = !1,
            Pc = hap_source_path + "includes/ba-simple-proxy.php",
            Ba, Fa;
        za && k.find(".player_loop").find("img").attr("src", Kb);
        Aa && k.find(".player_shuffle").find("img").attr("src", Lb);
        var B = [],
            Qa = [],
            R = [],
            H = 0,
            aa, ud, zd = e('<div class="hap_feedParser"/>'),
            Be = 0 == k.find("iframe[id='dl_iframe']").length ? e('<iframe id="dl_iframe"/>').css({
                position: "absolute",
                left: "-10000px",
                display: "none"
            }).appendTo(k) : k.find("iframe[id='dl_iframe']"),
            rb = e("<div/>"),
            Nc = e("<div/>");
        if (isMobile) var Xb, Ce = 1E3,
            vc = 0 == nb.find("div[id='download_confirm']").length ? e('<div id="download_confirm"><p>DOWNLOAD STARTING</p></DIV>').css({
                opacity: 0,
                zIndex: 1E3
            }).appendTo(nb) : nb.find("div[id='download_confirm']");
        var z = [],
            J = [],
            q = h.flashAudio,
            ba = h.circleMain,
            Xd = !1,
            Rb, n, A, Sd = !1,
            Zb, E = h.flashYoutube,
            Ea, pc = !1,
            Oa = !1,
            Ib = !1,
            bd, ad = !1,
            Sa = [],
            Sc, sc, Vb, $c, ta;
        xb && d();
        var t = e.playlistManager({
            randomPlay: Aa,
            loopingOn: za
        });
        e(t).on("ap_PlaylistManager.COUNTER_READY", function() {
            var a = t.getCounter(),
                b = B[a];
            b && !Tc && (pd(), eb && Ua(), V = b.origtype ? b.origtype : b.type, oa = b.mp3, tb = b.ogg, b.download ? Pb = !0 : Pb = null, mc && Pb && (cb.find("a.hap-download").length ? cb.find("a.hap-download").attr("href", b.download) : (b = e('<a class="hap-download" href="' + b.download + '" download></a>'), cb.off("click").wrapInner(b))), Mb(), Zc(), "undefined" !== typeof itemTriggered && itemTriggered(N, M, a))
        });
        e(t).on("ap_PlaylistManager.PLAYLIST_END", function() {
            pd();
            "undefined" !== typeof audioPlayerPlaylistEnd && audioPlayerPlaylistEnd(N, M);
            F = !1;
            Ja("off")
        });
        e(t).on("ap_PlaylistManager.PLAYLIST_END_ALERT", function() {
            "undefined" !== typeof audioPlayerPlaylistEnd && audioPlayerPlaylistEnd(N, M)
        });
        var sb = "",
            jb = "",
            kb = "",
            uc;
        "ontouchstart" in window ? (uc = !0, sb = "touchstart.ap mousedown.ap", jb = "touchmove.ap mousemove.ap", kb = "touchend.ap mouseup.ap") : (uc = !1, sb = "mousedown.ap", jb = "mousemove.ap", kb = "mouseup.ap");
        var Eb = !1,
            Ac, ec = !1,
            C = h.defaultVolume;
        0 > C && (C = 0);
        0 == C ? Ac = .5 : 1 < C && (C = 1);
        var ja = k.find(".volume_seekbar").css("cursor", "pointer").on(sb, function(a) {
                a.preventDefault();
                ua(a);
                return ec = !1
            }),
            Db = "horizontal";
        void 0 != ja.attr("data-orientation") && (Db = ja.attr("data-orientation").toLowerCase());
        if (void 0 != ja.attr("data-autoHide")) {
            var Eb = !0,
                Bb = !1,
                U, gc = parseInt(ja.attr("data-autoHide"), 10);
            if (!isMobile) af.on("mouseover", function() {
                if (!m) return !1;
                U && clearTimeout(U);
                ja.css("display", "block");
                Bb = !0;
                return !1
            }).on("mouseout", function() {
                if (!m) return !1;
                U && clearTimeout(U);
                U = setTimeout(T,
                    gc);
                return !1
            })
        }
        var Cb = !1,
            ka = 0,
            fc = k.find(".volume_level"),
            lb = k.find(".volume_bg");
        if (df && !isMobile) {
            ja.on("mouseover", p);
            var La = k.find(".player_volume_tooltip"),
                ce = parseInt(La.css("top"), 10);
            La.on("mouseenter", function() {
                ja.off("mouseover", p);
                La.css("display", "none")
            }).on("mouseleave", function() {
                ja.on("mouseover", p)
            })
        } else k.find(".player_volume_tooltip").remove();
        var ab, Fb, ca = !1,
            Cc = k.find(".progress_bg"),
            Ka = k.find(".load_progress"),
            xa = k.find(".play_progress");
        k.find(".player_progress");
        var W = Cc.width(),
            Bc = !1;
        if (ha) {
            var Ab = k.find(".load_canvas").css("cursor", "pointer"),
                hd = k.find(".play_canvas"),
                Va = k.find(".circlePlayer"),
                $d = parseFloat(Va.attr("data-offOpacity"), 10),
                ae = parseFloat(Va.attr("data-onOpacity"), 10);
            isMobile && ($d = ae = 1);
            var wb = {
                flash_id: h.flash_id,
                strokeSize: parseInt(Va.attr("data-strokeSize"), 10),
                play_color: hd.attr("data-bgcolor"),
                load_color: Ab.attr("data-bgcolor"),
                tolerance: parseInt(Va.attr("data-tolerance"), 10),
                offOpacity: $d,
                onOpacity: ae,
                circleWidth: Ab.width(),
                circleHeight: Ab.height()
            };
            if (Ia) {
                var Gb = wb.strokeSize,
                    Gc = wb.play_color,
                    ee = wb.load_color,
                    K = Ab[0].getContext("2d"),
                    Xa = hd[0].getContext("2d"),
                    ld = 2 * Math.PI,
                    kc = Math.PI / 2,
                    la = wb.circleWidth,
                    pa = wb.circleHeight,
                    Fc = la / 2,
                    Ec = Fc - Gb,
                    kd = h.tolerance,
                    Dc, jc = !1,
                    ma = 0;
                Ab.on(sb, function(a) {
                    a.preventDefault();
                    ic(a) ? (jc = !1, Dc > Ec - kd || ca || (mb(!0), K.clearRect(0, 0, la, pa), X(ma), ya())) : (jc = !0, ga(a));
                    return !1
                })
            } else Ab.remove(), hd.remove()
        } else k.find(".player_progress").css("cursor", "pointer").on(sb, function(a) {
            ga(a);
            return !1
        });
        this.flashVideoPause = function() {
            Ja("off");
            F = !1;
            zc()
        };
        this.flashVideoResume = function() {
            bb("off");
            F = !0;
            yc()
        };
        this.flashVideoEnd = function() {
            xc()
        };
        this.flashVideoStart = function() {
            bb("off");
            da = F = !0;
            yc()
        };
        this.flashYoutubeData = function(a, b, c, g) {
            ha ? (w(a) && w(b) && "undefined" !== typeof l(ba) && l(ba).pb_drawLoadbar(a / b), w(c) && w(g) && (ma = c / g, ca || "undefined" !== typeof l(ba) && l(ba).pb_drawSeekbar(c / g))) : (w(a) && w(b) && Ka && Ka.width(a / b * W), w(c) && w(g) && xa && xa.width(c / g * W));
            w(c) && w(g) && (Ga && Ga.html($b(c) + gb), Ha && Ha.html(ac(g)))
        };
        this.flashAudioData = function(a, b,
            c, g) {
            a /= b;
            ha ? Ia ? (w(a) && Wa(a), w(c) && w(g) && (ma = c / g, !ca && F && X(c / g))) : (null !== a && "undefined" !== typeof l(ba) && l(ba).pb_drawLoadbar(a), w(c) && w(g) && (ma = c / g, ca || "undefined" !== typeof l(ba) && l(ba).pb_drawSeekbar(c / g))) : (!ca && xa && xa.width(c / g * W), null !== a && (a *= W, a > W && (a = W), Ka && Ka.width(a)), w(c) && w(g) && (Ga && Ga.html($b(c) + gb), Ha && Ha.html(ac(g))))
        };
        this.flashAudioEnd = function() {
            xc()
        };
        this.flashCircleToggle = function(a) {
            mb()
        };
        this.flashCircleOverLoader = function(a) {
            player_progress_tooltip.css("display", "block");
            if (w(a)) {
                var b,
                    c;
                "youtube" == V ? Z ? (c = A.getDuration(), b = a * c) : "undefined" !== typeof l(E) && (c = l(E).pb_getFlashDuration(), b = a * c) : P ? n && (c = n.duration, b = a * c) : "undefined" !== typeof l(q) && (c = l(q).pb_getFlashDuration(), b = a * c);
                w(b) && w(c) && player_progress_tooltip.find("p").html($b(b) + cf + ac(c))
            }
        };
        this.flashCircleOutLoader = function() {
            player_progress_tooltip.css("display", "none")
        };
        this.flashCircleSeek = function(a) {
            qa(a)
        };
        this.embedFlash = function() {
            if (Z) h.useOnlyMp3Format && !hb && (a = q.substr(1), embedFlashAudio(a));
            else {
                var a = E.substr(1);
                embedFlashMain(a);
                a = q.substr(1);
                embedFlashAudio(a);
                ha && (a = ba.substr(1), embedFlashCircle(a))
            }
        };
        ef && $a.keyup(function(a) {
            if (!m || x) return !1;
            a || (a = window.event);
            a.cancelBubble ? a.cancelBubble = !0 : a.stopPropagation && a.stopPropagation();
            a = a.keyCode;
            37 == a ? N.previousAudio() : 39 == a ? N.nextAudio() : 32 == a ? N.toggleAudio() : 77 == a && (y(), D());
            return !1
        });
        Id.resize(function() {
            if (!m || x) return !1;
            gd && clearTimeout(gd);
            gd = setTimeout(Kd, 150)
        });
        this.getCurrentTime = function() {
            if (!m || !V) return !1;
            var a;
            if ("youtube" != V)
                if (P) n && (a =
                    n.currentTime);
                else if ("undefined" !== typeof l(q)) try {
                a = l(q).pb_getFlashPosition()
            } catch (b) {}
            return a
        };
        this.setPlayIcon = function() {
            Da && Da.hasClass("play_link") && Da.attr("src", wc);
            F = !1
        };
        this.playAudio = function() {
            if (!m || x || !v || F || !da) return !1;
            if ("youtube" == V) {
                if (!Oa) return !1;
                Z ? A.togglePlayback() : "undefined" !== typeof l(E) && l(E).pb_togglePlayback()
            } else P ? n && n.play() : "undefined" !== typeof l(q) && l(q).pb_play();
            bb("off");
            da = F = !0
        };
        this.pauseAudio = function() {
            if (!m || x || !v || !F || !da) return !1;
            if ("youtube" == V) {
                if (!Oa) return !1;
                Z ? A.togglePlayback() : "undefined" !== typeof l(E) && l(E).pb_togglePlayback()
            } else P ? n && n.pause() : "undefined" !== typeof l(q) && l(q).pb_pause();
            Ja("off");
            F = !1
        };
        this.toggleAudio = function() {
            if (!m || x || !v || !da) return !1;
            mb()
        };
        this.stopAudio = function() {
            if (!m || x || !v || !da) return !1;
            if ("youtube" == V) {
                if (!Oa) return !1;
                Z ? A.stop() : "undefined" !== typeof l(E) && l(E).pb_dispose()
            } else P ? n && (n.src = "", hb ? n.src = oa : bc && (n.src = tb)) : "undefined" !== typeof l(q) && l(q).pb_dispose();
            Jc();
            F = !1
        };
        this.checkAudio = function(a) {
            if (!m || x || !v) return !1;
            a = a.toLowerCase();
            if (F) {
                if ("pause" == a)
                    if ("youtube" == V) {
                        if (!Oa) return !1;
                        Z ? A.togglePlayback() : "undefined" !== typeof l(E) && l(E).pb_togglePlayback()
                    } else P ? n && n.pause() : "undefined" !== typeof l(q) && l(q).pb_pause();
                else if ("stop" == a) {
                    if ("youtube" == V) {
                        if (!Oa) return !1;
                        A.stop()
                    } else P ? n && (n.src = "", hb ? n.src = oa : bc && (n.src = tb)) : "undefined" !== typeof l(q) && l(q).pb_dispose();
                    Jc()
                }
                F = !1;
                Ja("off")
            }
        };
        this.nextAudio = function() {
            if (!m || x || !v) return !1;
            Na();
            t.advanceHandler(1, !0)
        };
        this.previousAudio = function() {
            if (!m || x || !v) return !1;
            Na();
            t.advanceHandler(-1, !0)
        };
        this.loadAudio = function(a) {
            if (!m || x || !v) return !1;
            if ("string" === typeof a) {
                var b = 0,
                    c = !1;
                for (b; b < H; b++)
                    if (a == B[b].title) {
                        a = b;
                        c = !0;
                        break
                    } if (!c) return u && alert('Track with name "' + a + '" doesnt exist. Load audio failed.'), !1
            } else if ("number" === typeof a) {
                if (0 > a || a > H - 1) return u && alert('Invalid track number. Track number  "' + a + '" doesnt exist. Load audio failed.'), !1
            } else return u && alert("Load audio method requires either a track number or a track title to load. Load audio failed."),
                !1;
            Na();
            t.processPlaylistRequest(a)
        };
        this.loadPlaylist = function(a) {
            if (!m || x) return !1;
            if ("undefined" === typeof a) return u && alert("loadPlaylist method requires data parameter. loadPlaylist failed."), !1;
            qb = a;
            td(qb)
        };
        this.addTrack = function(a, b, c, g) {
            if (!m || x) return !1;
            if ("undefined" === typeof a) return u && alert("addTrack method requires type parameter. AddTrack failed."), !1;
            if ("undefined" === typeof b) return u && alert("addTrack method requires format parameter. AddTrack failed."), !1;
            if ("undefined" === typeof c) return u &&
                alert("addTrack method requires track parameter. AddTrack failed."), !1;
            var f = 1,
                d = !1;
            if ("string" !== typeof c && "[object Object]" !== Object.prototype.toString.call(c))
                if ("[object Array]" === Object.prototype.toString.call(c)) f = c.length, d = !0;
                else return u && alert("addTrack method requires track as string, object or array parameter. AddTrack failed."), !1;
            Ca = g;
            a = a.toLowerCase();
            "visible" == a ? (v && ra && Nb(), Qb = !0, ra = !1) : (v && !ra && Nb(), ra = pb = !0);
            db = !1;
            if (v)
                if ("undefined" !== typeof Ca) {
                    if (0 > Ca || Ca > H) return u && alert('Invalid position to insert track to. Position number "' +
                        g + '" doesnt exist. AddTrack failed.'), !1;
                    Ca == H && (db = !0)
                } else db = !0, Ca = H;
            else {
                if ("undefined" !== typeof Ca) {
                    if (0 != Ca) return u && alert('Invalid position to insert track to. Position number "' + g + '" doesnt exist. AddTrack failed.'), !1
                } else Ca = 0;
                db = !0
            }
            vd();
            x = !0;
            Ob = !1;
            g = 0;
            var k, h = e("<ul id = playlist" + Math.floor(9999 * Math.random()) + "></ul>");
            b = b.toLowerCase();
            for (g; g < f; g++) k = d ? c[g] : c, "html" == b ? Rc(k).appendTo(h) : (k.type && k.mp3 || k.path) && Cd(k).appendTo(h);
            J = [];
            rb.empty();
            h.appendTo(rb).find("li[class='playlistItem']").each(function() {
                J.push(e(this))
            });
            ob = !1;
            v || (ob = !0, v = "visible" == a ? Ma : Nc);
            Y()
        };
        this.inputAudio = function(a) {
            if (!m || x) return !1;
            if ("undefined" === typeof a) return u && alert("inputAudio method requires data parameter. inputAudio failed."), !1;
            if ("undefined" === a.mp3) return u && alert("inputAudio method requires data.mp3 parameter. inputAudio failed."), !1;
            Na();
            t.reSetCounter();
            oa = a.mp3;
            "undefined" !== a.ogg && (tb = a.ogg);
            "undefined" !== a.title ? Ua(a.title) : Ua(cc);
            isMobile && (ea = !0, P || "undefined" !== typeof l(q) && l(q).pb_setAutoplay(!0));
            Mb();
            Zc()
        };
        this.removeTrack =
            function(a) {
                if (!m || x || !v) return !1;
                if ("undefined" === typeof a) return u && alert("removeTrack method requires track parameter. removeTrack failed."), !1;
                if ("string" === typeof a) {
                    var b = 0,
                        c = !1;
                    for (b; b < H; b++)
                        if (a == B[b].title) {
                            a = b;
                            c = !0;
                            break
                        } if (!c) return u && alert('Track with name "' + a + '" doesnt exist. RemoveTrack failed.'), !1;
                    R[a] && B[a] ? (R[a].remove(), B.splice(a, 1), yb(a)) : u && alert('RemoveTrack with name "' + a + '" failed.')
                } else if ("number" === typeof a) {
                    if (0 > a || a > H - 1) return u && alert('Invalid track number. Track number  "' +
                        a + '" doesnt exist. RemoveTrack failed.'), !1;
                    R[a] && B[a] ? (R[a].remove(), B.splice(a, 1), yb(a)) : u && alert('RemoveTrack with name "' + a + '" failed.')
                } else if ("[object Array]" === Object.prototype.toString.call(a))
                    if ("string" === typeof a[0] ? b = !0 : "number" === typeof a[0] && (b = !1), b) {
                        var b = 0,
                            c = a.length,
                            g, f, d;
                        b;
                        a: for (; b < c; b++)
                            if (f = a[b], "string" === typeof f) {
                                d = 0;
                                g = B.length;
                                if (0 == g) {
                                    yb();
                                    break a
                                }
                                for (d; d < g; d++)
                                    if (f == B[d].title && R[d] && B[d]) {
                                        R[d].remove();
                                        B.splice(d, 1);
                                        yb(d);
                                        break
                                    }
                            }
                    } else a: for (a.sort(Ze), b = 0, c = a.length, b; b <
                        c; b++) {
                        if (f = a[b], "number" === typeof f) {
                            g = B.length;
                            if (0 == g) {
                                yb();
                                break a
                            } - 1 < f && f < g && R[f] && B[f] && (R[f].remove(), B.splice(f, 1), yb(f))
                        }
                    } else return u && alert("removeTrack method requires track parameter as string, number or array. removeTrack failed."), !1
            };
        this.destroyAudio = function() {
            if (!m || x || !v) return !1;
            qd()
        };
        this.destroyPlaylist = function() {
            if (!m || x || !v) return !1;
            Nb()
        };
        this.setTitle = function(a) {
            if (!m || x || !v) return !1;
            Ua(a)
        };
        this.toggleShuffle = function() {
            if (!m || x) return !1;
            Aa ? (k.find(".player_shuffle").find("img").attr("src",
                oc), Aa = !1) : (k.find(".player_shuffle").find("img").attr("src", Lb), Aa = !0);
            t.setRandom(Aa)
        };
        this.toggleLoop = function() {
            if (!m || x) return !1;
            za ? (k.find(".player_loop").find("img").attr("src", nc), za = !1) : (k.find(".player_loop").find("img").attr("src", Kb), za = !0);
            t.setLooping(za)
        };
        this.setVolume = function(a) {
            if (!m || x) return !1;
            0 > a ? a = 0 : 1 < a && (a = 1);
            C = a;
            D()
        };
        this.setWhere = function(x) {
        	console.log('xug'+n.currentTime);
            n.currentTime = x;
        };

        this.getVolume = function() {
            return m ? C : !1
        };
        this.setAutoPlay = function(a) {
            if (!m) return !1;
            ea = a;
            P || "undefined" !== typeof l(q) && l(q).pb_setAutoplay(a)
        };
        this.getAutoPlay =
            function() {
                return m ? ea : !1
            };
        this.getIsMobile = function() {
            return isMobile
        };
        this.getMobileType = function() {
            return ub
        };
        this.getSetupDone = function() {
            return m
        };
        this.getPlaylistLoaded = function() {
            return Ob
        };
        this.getPlaylistTransition = function() {
            return x
        };
        this.getMediaPlaying = function() {
            return !m || x ? !1 : F
        };
        this.getAudioInited = function() {
            return !m || x ? !1 : da
        };
        this.getMediaType = function() {
            return !m || x ? !1 : V
        };
        this.getActiveItem = function() {
            return !m || x ? !1 : t.getCounter()
        };
        this.getPlaylistItems = function(a) {
            if (!m || x || !R ||
                0 == R.length) return !1;
            if ("string" === typeof a) return R;
            if ("number" === typeof a) return 0 > num || num > H - 1 || !R[num] ? !1 : R[num]
        };
        this.getMediaCount = function() {
            return !m || x ? !1 : w(H) ? H : 0
        };
        this.getPlaylistHidden = function() {
            return !m || x ? !1 : ra
        };
        this.get_hidden_playlist_holder = function() {
            return m ? Nc : !1
        };
        this.getPlaylistList = function() {
            return m && Ya && 0 != Ya.length ? Ya : !1
        };
        this.orderPlaylist = function(a, b) {
            if (!m || !v) return !1;
            if ("undefined" === typeof a) return u && alert("orderPlaylist method requires action parameter. orderPlaylist failed."),
                !1;
            var c = v.children("li"),
                d = c.length;
            if (0 == d) return !1;
            var f = a.toLowerCase();
            if ("reverse" == f) v.append(c.get().reverse());
            else if ("random" == f || "remap" == f || "swap" == f) {
                if ("random" == f) b = Xe(d);
                else if ("remap" == f) {
                    if ("undefined" === typeof b || b.length != d) return !1
                } else if ("swap" == f) {
                    if ("undefined" === typeof b || 2 != b.length) return !1;
                    c = Ye(d);
                    c.splice(b[1], 1, b[0]);
                    c.splice(b[0], 1, b[1]);
                    b = e.extend(!0, [], c)
                } else return !1;
                orderedItems = jQuery.map(b, function(a) {
                    return jQuery(R).get(a)
                });
                v.empty().html(orderedItems)
            } else return u &&
                alert("Wrong action parameter for orderPlaylist method. orderPlaylist failed."), !1;
            tc();
            if (c = Ma.find("a[class=playlistSelected]").attr("data-id")) t.reSetCounter(c), eb && Ua()
        };
        this.checkScroll = function() {
            if (!m || x || !v) return !1;
            ia()
        };
        this.reinitScroll = function() {
            if (!m || x || !v) return !1;
            aa && (aa.reinitialise(), "vertical" == Hb ? (aa.scrollToY(0), e(".jspPane").css("top", "0px")) : (aa.scrollToX(0), e(".jspPane").css("left", "0px")));
            xb && ta && t && -1 != t.getCounter() && eb && Ua()
        };
        this.getPlaylistData = function() {
            return m &&
                !x && v ? B : !1
        };
        this.getSoundId = function() {
            return m ? M : !1
        };
        this.getTouch = function() {
            return m ? uc : !1
        };
        this.get_hap_source_path = function() {
            return m ? hap_source_path : !1
        };
        Z ? (e(".flashMain").remove(), e(".circleMain").remove(), P ? (e(".flashAudio").remove(), vb()) : Me()) : Je();
        return this
    }
})(jQuery);
(function(e) {
    e.APHAPYTLoader = function(h) {
        function d() {
            if (p.length) {
                D = p.shift();
                y = D.type;
                var d = D.path;
                Q = [];
                X = 0;
                qa = 1;
                Wa = D.limit ? D.limit : 200;
                ya = D.order ? D.order : "relevance";
                if ("youtube_single" == y || "youtube_single_list" == y) d = "https://www.googleapis.com/youtube/v3/videos?id=" + d + "&key=" + ia + "&part=snippet,contentDetails,statistics,status";
                else if (-1 == $.inArray(ya, ic) && (ya = "relevance"), "youtube_playlist" == y) d = "https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,status,contentDetails&maxResults=50&playlistId=" +
                    d + "&key=" + ia + "";
                else if ("youtube_video_query" == y) d = "https://www.googleapis.com/youtube/v3/search?part=id,snippet&type=video&maxResults=50&order=" + ya + "&q=" + (D.query || D.path) + "&key=" + ia + "";
                else if ("youtube_user_channels" == y) d = "https://www.googleapis.com/youtube/v3/channels?part=contentDetails&maxResults=50&forUsername=" + d + "&key=" + ia + "";
                else if ("youtube_channel" == y) d = "https://www.googleapis.com/youtube/v3/channels?part=snippet,contentDetails&id=" + d + "&key=" + ia + "";
                else {
                    alert("Wrong youtube type V3!");
                    return
                }
                T(d)
            } else $(G).trigger("APHAPYTLoader.END_LOAD", [L])
        }

        function T(e) {
            $.ajax({
                url: e,
                dataType: "jsonp"
            }).done(function(e) {
                e.error && e.error.message && alert(e.error.message);
                var h, p = e.items.length;
                p + X > Wa && (p = Wa - X);
                for (h = 0; h < p; h++)
                    if (_item = e.items[h]) "youtube_playlist" == y || "youtube_single" == y || "youtube_single_list" == y ? ("private" != _item.status.privacyStatus && L.push(ua(_item, y)), X++) : "youtube_video_query" == y ? (L.push(ua(_item, y)), X++) : "youtube_user_channels" != y && "youtube_channel" != y || Q.push(_item.contentDetails.relatedPlaylists.uploads);
                if ("youtube_single" == y || "youtube_single_list" == y) d();
                else if ("youtube_user_channels" != y && "youtube_channel" != y)
                    if (qa += 50, qa < Wa)
                        if (qa <= e.pageInfo.totalResults && e.nextPageToken) {
                            h = D.path;
                            if ("youtube_playlist" == y) var G = "https://www.googleapis.com/youtube/v3/playlistItems?pageToken=" + e.nextPageToken + "&part=snippet,status,contentDetails&maxResults=50&playlistId=" + h + "&key=" + ia + "";
                            else "youtube_video_query" == y && (G = "https://www.googleapis.com/youtube/v3/search?pageToken=" + e.nextPageToken + "&part=id,snippet&maxResults=50&order=" +
                                ya + "&q=" + h + "&key=" + ia + "");
                            T(G)
                        } else d();
                else va && (ga++, ga < Q.length ? (qa = 0, wa = Q[ga], G = "https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,status,contentDetails&maxResults=50&playlistId=" + wa + "&key=" + ia + "", T(G)) : (va = !1, d())), d();
                else Q.length ? (1 < Q.length && (va = !0), wa = Q[ga], G = "https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,status,contentDetails&maxResults=50&playlistId=" + wa + "&key=" + ia + "", y = "youtube_playlist", T(G)) : d()
            }).fail(function(e, h, p) {
                alert("There was an error retrieveing youtube data: " +
                    e.responseText);
                d()
            })
        }

        function ua(d, e) {
            var h = jQuery.extend(!0, {}, D);
            h.deeplink && "youtube_single" != h.type && (h.deeplink += (X + 1).toString());
            h.data = d;
            h.type = "youtube";
            h.origtype = e;
            "youtube_single" == e || "youtube_single_list" == e ? h.id = d.id : "youtube_playlist" == e ? h.id = d.contentDetails.videoId : "youtube_video_query" == e && (h.id = d.id.videoId);
            h.title || (h.title = d.snippet.title ? d.snippet.title : null);
            h.description || (h.description = d.snippet.description ? d.snippet.description : null);
            !h.thumb && d.snippet.thumbnails ? d.snippet.thumbnails.medium ?
                h.thumb = d.snippet.thumbnails.medium.url : d.snippet.thumbnails.standard && (h.thumb = d.snippet.thumbnails.standard.url) : default_artwork && (h.thumb = default_artwork);
            h.mp3 = h.id;
            h.ogg = "";
            return h
        }
        var G = this,
            y, D, p = [],
            L = [],
            Q = [],
            ga = 0,
            wa, va, qa, X, Wa, ya, ic = "date rating relevance title videoCount viewCount".split(" "),
            ia = h.ytAppId;
        $.inArray(e.location.protocol, ["http:", "https:"]);
        this.setData = function(e) {
            ia && "" != ia ? (L = [], p = $.extend(!0, [], [e]), d()) : alert("Youtube APMBI key missing! Please set APMBI key in player settings.")
        }
    }
})(window);
(function(e) {
    function h(d, h) {
        function ua(d) {
            p.playerReady = !0;
            p.forcePreviewStop || (e(p).trigger("ap_YoutubePlayer.YT_READY"), "undefined" !== typeof p._player.setVolume && p._player.setVolume(100 * p._defaultVolume), p._autoPlay && p._player.playVideo())
        }

        function G(d) {
            e(p).trigger("ap_YoutubePlayer.QUALITY_CHANGE", [d.data])
        }

        function y(d) {
            if (p.forceMainStop && (p.forceMainStop = !1, "undefined" !== typeof p._player.stopVideo)) {
                p._player.stopVideo();
                e(p).trigger("ap_YoutubePlayer.FORCE_MAIN_STOP");
                return
            } - 1 != d.data &&
                (0 == d.data ? (e(p).trigger("ap_YoutubePlayer.END_PLAY"), p.loop && p._player.playVideo()) : 1 == d.data ? (p.forcePreviewStop && "undefined" !== typeof p._player.stopVideo && p._player.stopVideo(), p._autoPlay = !0, p.small_embed && "undefined" !== typeof p._player.setVolume && p._player.setVolume(100 * p._defaultVolume), p._inited || (e(p).trigger("ap_YoutubePlayer.START_PLAY"), p._inited = !0, !p.small_embed && p.quality ? p._player.setPlaybackQuality(p.quality) : p.small_embed && p._player.setPlaybackQuality(p._player.getAvailableQualityLevels()[p._player.getAvailableQualityLevels().length -
                    1])), e(p).trigger("ap_YoutubePlayer.STATE_PLAYING")) : 2 == d.data ? e(p).trigger("ap_YoutubePlayer.STATE_PAUSED") : 5 == d.data && e(p).trigger("ap_YoutubePlayer.STATE_CUED"))
        }

        function D(d) {
            e(p).trigger("ap_YoutubePlayer.ERROR_HANDLER", [d.data])
        }
        var p = this;
        this.isIE = d.isIE ? d.isIE : !1;
        this.isMobile = d.isMobile;
        this.initialAutoplay = d.initialAutoplay;
        this._inited = !1;
        this._player;
        this._autoPlay = d.autoPlay;
        this._defaultVolume = d.defaultVolume;
        this._youtubeHolder = d.youtubeHolder;
        this._frameId = "ytplayer" + Math.floor(16777215 *
            Math.random());
        d.quality && (this.quality = d.quality);
        d.small_embed && (this.small_embed = d.small_embed);
        d.loop && (this.loop = d.loop);
        this.lastID;
        this.playerReadyInterval = 100;
        this.playerReadyIntervalID;
        this.playerReady = !1;
        this.protocol = d.protocol;
        0 == d.youtubeChromeless && (h.useControls = !0, h.ytShowinfo = !0);
        var L = "?controls=" + (h.useControls ? 1 : 0).toString(),
            Q = "&amp;autohide=" + (h.autoHideControls ? 1 : 0).toString(),
            ga = "&amp;showinfo=" + (h.ytShowinfo ? 1 : 0).toString(),
            wa = "&amp;modestbranding=" + (h.ytModestbranding ? 1 :
                0).toString(),
            va = "&amp;rel=" + (h.ytRel ? 1 : 0).toString(),
            qa = "&amp;theme=" + (h.ytTheme ? h.ytTheme : "dark");
        this.forcePreviewStop = this.forceMainStop = !1;
        this.youtubeVideoIframe = e("<iframe />", {
            frameborder: 0,
            src: "https://www.youtube.com/embed/" + d.mediaPath + L + va + ga + Q + "&amp;enablejsapi=1" + qa + wa + "&amp;wmode=transparent",
            width: "100%",
            height: "100%",
            id: this._frameId,
            webkitAllowFullScreen: !0,
            mozallowfullscreen: !0,
            allowFullScreen: !0
        });
        this._youtubeHolder.css("display", "block").append(this.youtubeVideoIframe);
        L = document.createElement("script");
        L.src = this.protocol + "//www.youtube.com/iframe_api";
        Q = document.getElementsByTagName("script")[0];
        Q.parentNode.insertBefore(L, Q);
        var X = setInterval(function() {
            window.YT && window.YT.Player && (X && clearInterval(X), p._player = new YT.Player(p._frameId, {
                events: {
                    onReady: ua,
                    onPlaybackQualityChange: G,
                    onStateChange: y,
                    onError: D
                }
            }))
        }, 100);
        window.onYouTubeIframeAPIReady = function() {}
    }
    e.youtubePlayer = function(d, e) {
        return new h(d, e)
    };
    h.prototype = {
        clean: function(d) {
            this._player && ("undefined" !== typeof this._player.stopVideo &&
                this._player.stopVideo(), this._player = null);
            this.youtubeVideoIframe && (this.youtubeVideoIframe.attr("src", ""), this.youtubeVideoIframe.remove(), this.youtubeVideoIframe = null);
            this._youtubeHolder && this._youtubeHolder.empty().css("display", "none")
        },
        stopPreview: function() {
            this.forcePreviewStop = !0
        },
        initVideo: function(d, e) {
            this.forcePreviewStop = this.forceMainStop = !1;
            this.quality = e;
            if (this.playerReady) this._player && (this._inited = !1, this._autoPlay ? "undefined" !== typeof this._player.loadVideoById && this._player.loadVideoById(d) :
                "undefined" !== typeof this._player.cueVideoById && this._player.cueVideoById(d));
            else {
                var h = this;
                this.lastID = d;
                this.playerReadyIntervalID || (this.playerReadyIntervalID = setInterval(function() {
                    h.playerReady && (h.playerReadyIntervalID && clearInterval(h.playerReadyIntervalID), h.forceMainStop || h.initVideo(h.lastID))
                }, this.playerReadyInterval))
            }
        },
        stop: function() {
            this.forceMainStop = !0;
            this._player && "undefined" !== typeof this._player.stopVideo && this._player.stopVideo()
        },
        play: function() {
            this._player && "undefined" !==
                typeof this._player.playVideo && this._player.playVideo()
        },
        pause: function() {
            this._player && "undefined" !== typeof this._player.pauseVideo && this._player.pauseVideo()
        },
        togglePlayback: function(d) {
            if (this._player)
                if (void 0 == d) {
                    if ("undefined" === typeof this._player.getPlayerState) return !1;
                    d = this._player.getPlayerState();
                    1 == d ? "undefined" !== typeof this._player.pauseVideo && this._player.pauseVideo() : 2 == d ? "undefined" !== typeof this._player.playVideo && this._player.playVideo() : -1 != d && 5 != d && 0 != d || "undefined" === typeof this._player.playVideo ||
                        this._player.playVideo()
                } else d ? "undefined" !== typeof this._player.playVideo && this._player.playVideo() : "undefined" !== typeof this._player.pauseVideo && this._player.pauseVideo()
        },
        seek: function(d) {
            this._player && "undefined" !== typeof this._player.seekTo && this._player.seekTo(d)
        },
        isMuted: function() {
            if (this._player && "undefined" !== typeof this._player.isMuted) return this._player.isMuted()
        },
        getDuration: function() {
            if (this._player && "undefined" !== typeof this._player.getDuration) return this._player.getDuration()
        },
        getCurrentTime: function() {
            if (this._player && "undefined" !== typeof this._player.getCurrentTime) return this._player.getCurrentTime()
        },
        getVideoLoadedFraction: function() {
            if (this._player && "undefined" !== typeof this._player.getVideoLoadedFraction) return this._player.getVideoLoadedFraction()
        },
        getVideoBytesLoaded: function() {
            if (this._player && "undefined" !== typeof this._player.getVideoBytesLoaded) return this._player.getVideoBytesLoaded()
        },
        getVideoBytesTotal: function() {
            if (this._player && "undefined" !== typeof this._player.getVideoBytesTotal) return this._player.getVideoBytesTotal()
        },
        setVolume: function(d) {
            0 > d ? vol = 0 : 1 < d && (d = 1);
            this._player && "undefined" !== typeof this._player.setVolume && this._player.setVolume(100 * d)
        },
        getPlayerState: function() {
            if (this._player && "undefined" !== typeof this._player.getPlayerState) return this._player.getPlayerState()
        },
        setAutoPlay: function(d) {
            this._autoPlay = d
        },
        getQualityLevels: function() {
            return this._player.getAvailableQualityLevels()
        },
        getCurrQuality: function() {
            return this._player.getPlaybackQuality()
        },
        setPlaybackQuality: function(d) {
            this._player.setPlaybackQuality(d)
        }
    }
})(jQuery);
(function(e) {
    function h(d) {
        this._loopingOn = d.loopingOn;
        this._randomPlay = d.randomPlay;
        this._playlistItems;
        this._lastInOrder = !1;
        this._counter = -1;
        this._lastPlayedFromPlaylistClick;
        this._lastRandomCounter;
        this._randomPaused = !1;
        this._randomArr = [];
        this._playlistSelect = !1
    }
    e.playlistManager = function(d) {
        return new h(d)
    };
    h.prototype = {
        setCounter: function(d, e) {
            "undefined" === typeof e && (e = !0);
            this._counter = e ? this._counter + parseInt(d, 10) : parseInt(d, 10);
            this._checkCounter()
        },
        getCounter: function() {
            return this._randomPlay ?
                this._playlistSelect ? this._counter : this._randomArr[this._counter] : this._counter
        },
        advanceHandler: function(d) {
            this._playlistSelect = !1;
            this._randomPaused ? this._handleRandomPaused(d) : this.setCounter(d)
        },
        processPlaylistRequest: function(d) {
            this._playlistSelect = !1;
            this._randomPlay && (this._playlistSelect = !0, this._lastPlayedFromPlaylistClick = d, this._randomPaused || (this._lastRandomCounter = this._counter, this._randomPaused = !0));
            this.setCounter(d, !1)
        },
        getLastInOrder: function() {
            return this._lastInOrder
        },
        getRandomPaused: function() {
            return this._randomPaused
        },
        setPlaylistItems: function(d, e) {
            "undefined" === typeof e && (e = !0);
            e && (this._counter = -1);
            this._playlistItems = d;
            this._randomPlay && this._makeRandomList()
        },
        reSetCounter: function(d) {
            "undefined" === typeof d ? this._counter = -1 : (d = parseInt(d, 10), this._playlistItems ? (d > this._playlistItems - 1 ? d = this._playlistItems - 1 : 0 > d && (d = 0), this._counter = d) : this._counter = -1)
        },
        setRandom: function(d) {
            (this._randomPlay = d) && this._makeRandomList();
            this._randomChange()
        },
        setLooping: function(d) {
            this._loopingOn = d
        },
        _handleRandomPaused: function(d) {
            var h =
                e(this);
            this._randomPaused = !1;
            this._lastRandomCounter + d > this._playlistItems - 1 ? (this._counter = this._playlistItems - 1, h.trigger("ap_PlaylistManager.COUNTER_READY")) : 0 > this._lastRandomCounter + d ? (this._counter = 0, h.trigger("ap_PlaylistManager.COUNTER_READY")) : this.setCounter(this._lastRandomCounter + d, !1)
        },
        _randomChange: function() {
            this._randomPlay ? (this._activeIndexFirst(), this._counter = 0) : this._randomPaused ? (this._counter = this._lastPlayedFromPlaylistClick, this._randomPaused = !1) : this._counter = this._randomArr[this._counter]
        },
        _checkCounter: function() {
            if (isNaN(this._counter)) alert("ap_PlaylistManager message: No active media, counter = " + this._counter);
            else {
                var d = e(this);
                this._lastInOrder = !1;
                this._loopingOn ? (this._randomPlay ? this._counter > this._playlistItems - 1 ? (this._counter = this._randomArr[this._playlistItems - 1], this._makeRandomList(), this._firstIndexCheck(), this._counter = 0, d.trigger("ap_PlaylistManager.PLAYLIST_END")) : 0 > this._counter && (this._counter = this._randomArr[0], this._makeRandomList(), this._lastIndexCheck(), this._counter =
                    this._playlistItems - 1) : this._counter > this._playlistItems - 1 ? (this._counter = 0, d.trigger("ap_PlaylistManager.PLAYLIST_END")) : 0 > this._counter && (this._counter = this._playlistItems - 1), d.trigger("ap_PlaylistManager.COUNTER_READY")) : (this._counter > this._playlistItems - 1 ? (this._counter = this._playlistItems - 1, this._lastInOrder = !0) : 0 > this._counter && (this._counter = 0), this._lastInOrder ? d.trigger("ap_PlaylistManager.PLAYLIST_END") : d.trigger("ap_PlaylistManager.COUNTER_READY"))
            }
        },
        _makeRandomList: function() {
            3 > this._playlistItems ||
                (this._randomArr = this._randomiseIndex(this._playlistItems))
        },
        _firstIndexCheck: function() {
            if (this._randomArr[0] == this._counter) {
                var d = this._randomArr.splice(0, 1);
                this._randomArr.push(d)
            }
        },
        _lastIndexCheck: function() {
            if (this._randomArr[this._playlistItems - 1] == this._counter) {
                var d = this._randomArr.splice(this._playlistItems - 1, 1);
                this._randomArr.unshift(d)
            }
        },
        _activeIndexFirst: function() {
            var d, e = this._randomArr.length;
            for (d = 0; d < e; d++)
                if (this._randomArr[d] == this._counter) {
                    if (0 == d) break;
                    d = this._randomArr.splice(d,
                        1);
                    this._randomArr.unshift(parseInt(d, 10));
                    break
                }
        },
        _randomiseIndex: function(d) {
            var e = [],
                h = [],
                G;
            for (G = 0; G < d; G++) e[G] = G;
            var y;
            for (G = 0; G < d; G++) y = Math.round(Math.random() * (e.length - 1)), h[G] = e[y], e.splice(y, 1);
            return h
        }
    }
})(jQuery);
(function(e) {
    apTextScroller = function() {
        function e() {
            "left" == D && (L -= T, d.css("left", L + "px"), parseInt(d.css("left"), 10) < -y && (L = -T))
        }
        var d, T, ua, G, y, D, p, L = 0,
            Q, ga, wa, va, qa = !1;
        this.init = function(e, h, p, y, L, ga) {
            Q = e;
            d = h;
            ua = p;
            D = y;
            G = L;
            T = ga
        };
        this.input = function(e) {
            ga = e;
            Q.html(e);
            wa = Q.width();
            var h = e.replace(/\s/g, "&nbsp;") + G;
            d.html("");
            d.css("width", "auto");
            d.html(h);
            y = d.width();
            if (0 != y) {
                e = h;
                if (y <= 2 * ua.width()) {
                    for (var p = Math.floor(2 * ua.width() / y), D = 0; D < p; D++) e += h;
                    h = y * (p + 1)
                } else e += h, h = 2 * y;
                d.html(e);
                d.css("width",
                    h + 1 + "px");
                va = e;
                qa = !0
            }
        };
        this.inputSingle = function(d) {};
        this.activate = function() {
            this.deactivate();
            ua.width() >= wa ? d.html(ga) : (d.html(va), p = setInterval(e, 100))
        };
        this.deactivate = function() {
            p && clearInterval(p);
            "left" == D && (d.css("left", "0px"), L = 0)
        };
        this.checkSize = function() {
            qa && (ua.width() >= wa ? (this.deactivate(), d.html(ga)) : (d.html(va), this.activate()))
        }
    }
})(jQuery);